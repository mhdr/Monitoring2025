import{bI as a,bQ as e}from"./vendor-TAwwu7tv.js";import{a as l,c as r,a2 as i,a3 as s,a4 as t,e as d,a5 as n,a6 as o,j as m}from"./layout-C1_h6sDC.js";import{SyncfusionGridWrapper as c}from"./SyncfusionGridWrapper-je9qfgPl.js";import{z as u,E as g,a as x,I as h,F as f,B as p,D as y,c as v,J as b,K as j,N as D,b as w,t as A,G as C,V as I,O as T,v as k,S,j as F,u as W,d as $,P as E,w as z,h as P,x as M,q as N,r as R,T as B}from"./mui-core-im59jMHH.js";import{C as q,W as H,av as L,a8 as O,G,aw as V,ax as J,R as K,ae as Q,ay as U,E as X,a9 as Y,N as Z}from"./mui-icons-v3eeVnKX.js";import{c as _}from"./react-router-B0bL9ISA.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./index-uPr0P1lU.js";import"./syncfusion-Czakt5fS.js";const aa=r(),ea=({open:r,onClose:s,itemId:t,itemName:d,onSuccess:n})=>{const{t:o}=l(),[m,c]=a.useState(!1),[F,W]=a.useState(null),[$,E]=a.useState({}),[z,P]=a.useState({open:!1,message:"",severity:"success"}),[M,N]=a.useState({alarmType:1,alarmPriority:2,compareType:3,isDisabled:!1,alarmDelay:5,message:"",messageFa:"",value1:"",value2:"",timeout:null}),R=a.useMemo(()=>5===M.compareType,[M.compareType]),B=a.useMemo(()=>2===M.alarmType,[M.alarmType]),H=a.useMemo(()=>1===M.alarmType,[M.alarmType]),L=()=>{const a={};return M.message&&M.message.length>500&&(a.message=o("addAlarmDialog.validation.messageTooLong")),M.messageFa&&M.messageFa.length>500&&(a.messageFa=o("addAlarmDialog.validation.messageFaTooLong")),1===M.alarmType&&(M.value1&&""!==M.value1.trim()?M.value1.length>100&&(a.value1=o("addAlarmDialog.validation.value1TooLong")):a.value1=o("addAlarmDialog.validation.value1Required"),5===M.compareType&&(M.value2&&""!==M.value2.trim()?M.value2.length>100&&(a.value2=o("addAlarmDialog.validation.value2TooLong")):a.value2=o("addAlarmDialog.validation.value2Required"))),2===M.alarmType&&(null===M.timeout||M.timeout<=0?a.timeout=o("addAlarmDialog.validation.timeoutRequired"):M.timeout>86400&&(a.timeout=o("addAlarmDialog.validation.timeoutRange"))),(M.alarmDelay<0||M.alarmDelay>3600)&&(a.alarmDelay=o("addAlarmDialog.validation.alarmDelayRange")),null!==M.timeout&&(M.timeout<0||M.timeout>86400)&&(a.timeout=o("addAlarmDialog.validation.timeoutRange")),E(a),0===Object.keys(a).length},O=()=>{m||(N({alarmType:1,alarmPriority:2,compareType:3,isDisabled:!1,alarmDelay:5,message:"",messageFa:"",value1:"",value2:"",timeout:null}),E({}),W(null),P({open:!1,message:"",severity:"success"}),s())},G=()=>{P({...z,open:!1})};return e.jsxs(u,{open:r,onClose:O,maxWidth:"md",fullWidth:!0,"data-id-ref":"add-alarm-dialog",children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},"data-id-ref":"add-alarm-dialog-title",children:[e.jsx(x,{variant:"h6",component:"span",children:o("addAlarmDialog.title")}),e.jsx(h,{edge:"end",onClick:O,disabled:m,"aria-label":o("close"),"data-id-ref":"add-alarm-dialog-close-btn",children:e.jsx(q,{})})]}),e.jsxs(f,{dividers:!0,"data-id-ref":"add-alarm-dialog-content",children:[d&&e.jsxs(e.Fragment,{children:[e.jsx(p,{sx:{mb:2},"data-id-ref":"add-alarm-item-info",children:e.jsxs(x,{variant:"body2",color:"text.secondary",children:[o("addAlarmDialog.itemName"),": ",e.jsx("strong",{children:d})]})}),e.jsx(y,{sx:{mb:2}})]}),F&&e.jsx(v,{severity:"error",sx:{mb:2},"data-id-ref":"add-alarm-error-alert",children:F}),e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(b,{fullWidth:!0,"data-id-ref":"add-alarm-type-field",children:[e.jsx(j,{id:"alarm-type-label",children:o("addAlarmDialog.fields.alarmType")}),e.jsxs(D,{labelId:"alarm-type-label",value:M.alarmType,label:o("addAlarmDialog.fields.alarmType"),onChange:a=>N({...M,alarmType:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.type.comparative")}),e.jsx(w,{value:2,children:o("alarms.type.timeout")})]})]}),e.jsxs(b,{fullWidth:!0,"data-id-ref":"add-alarm-priority-field",children:[e.jsx(j,{id:"alarm-priority-label",children:o("addAlarmDialog.fields.alarmPriority")}),e.jsxs(D,{labelId:"alarm-priority-label",value:M.alarmPriority,label:o("addAlarmDialog.fields.alarmPriority"),onChange:a=>N({...M,alarmPriority:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.priority.medium")}),e.jsx(w,{value:2,children:o("alarms.priority.high")})]})]}),H&&e.jsxs(b,{fullWidth:!0,"data-id-ref":"add-alarm-compare-type-field",children:[e.jsx(j,{id:"compare-type-label",children:o("addAlarmDialog.fields.compareType")}),e.jsxs(D,{labelId:"compare-type-label",value:M.compareType,label:o("addAlarmDialog.fields.compareType"),onChange:a=>N({...M,compareType:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.condition.equal")}),e.jsx(w,{value:2,children:o("alarms.condition.notEqual")}),e.jsx(w,{value:3,children:o("alarms.condition.higher")}),e.jsx(w,{value:4,children:o("alarms.condition.lower")}),e.jsx(w,{value:5,children:o("alarms.condition.between")})]})]}),H&&e.jsx(A,{fullWidth:!0,label:o("addAlarmDialog.fields.value1"),value:M.value1,onChange:a=>N({...M,value1:a.target.value}),error:Boolean($.value1),helperText:$.value1||o("addAlarmDialog.hints.value1"),disabled:m,"data-id-ref":"add-alarm-value1-field"}),H&&R&&e.jsx(A,{fullWidth:!0,label:o("addAlarmDialog.fields.value2"),value:M.value2,onChange:a=>N({...M,value2:a.target.value}),error:Boolean($.value2),helperText:$.value2||o("addAlarmDialog.hints.value2"),disabled:m,"data-id-ref":"add-alarm-value2-field"}),e.jsx(A,{fullWidth:!0,type:"number",label:o("addAlarmDialog.fields.alarmDelay"),value:M.alarmDelay,onChange:a=>N({...M,alarmDelay:parseInt(a.target.value)||0}),error:Boolean($.alarmDelay),helperText:$.alarmDelay||o("addAlarmDialog.hints.alarmDelay"),disabled:m,inputProps:{min:0,max:3600},"data-id-ref":"add-alarm-delay-field"}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:o("addAlarmDialog.fields.message"),value:M.message,onChange:a=>N({...M,message:a.target.value}),error:Boolean($.message),helperText:$.message||o("addAlarmDialog.hints.message"),disabled:m,"data-id-ref":"add-alarm-message-field"}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:o("addAlarmDialog.fields.messageFa"),value:M.messageFa,onChange:a=>N({...M,messageFa:a.target.value}),error:Boolean($.messageFa),helperText:$.messageFa||o("addAlarmDialog.hints.messageFa"),disabled:m,"data-id-ref":"add-alarm-message-fa-field"}),B&&e.jsx(A,{fullWidth:!0,type:"number",label:o("addAlarmDialog.fields.timeout"),value:M.timeout??"",onChange:a=>N({...M,timeout:a.target.value?parseInt(a.target.value):null}),error:Boolean($.timeout),helperText:$.timeout||o("addAlarmDialog.hints.timeout"),disabled:m,inputProps:{min:1,max:86400},"data-id-ref":"add-alarm-timeout-field"}),e.jsx(C,{control:e.jsx(I,{checked:M.isDisabled,onChange:a=>N({...M,isDisabled:a.target.checked}),disabled:m,"data-id-ref":"add-alarm-disabled-switch"}),label:o("addAlarmDialog.fields.isDisabled"),"data-id-ref":"add-alarm-disabled-field"})]})]}),e.jsxs(T,{"data-id-ref":"add-alarm-dialog-actions",children:[e.jsx(k,{onClick:O,disabled:m,"data-id-ref":"add-alarm-cancel-btn",children:o("cancel")}),e.jsx(k,{onClick:async()=>{if(W(null),L()){c(!0);try{const a={itemId:t,isDisabled:M.isDisabled,alarmDelay:M.alarmDelay,message:M.message||null,messageFa:M.messageFa||null,value1:M.value1||null,value2:M.value2||null,timeout:M.timeout,alarmType:M.alarmType,alarmPriority:M.alarmPriority,compareType:M.compareType};aa.log("Adding alarm:",a);const e=await i(a);e.success?(aa.log("Alarm added successfully:",e),P({open:!0,message:e.message||o("addAlarmDialog.success.added"),severity:"success"}),n?.(),setTimeout(()=>{O()},1e3)):(aa.error("Failed to add alarm:",e),W(e.message||o("addAlarmDialog.errors.addFailed")))}catch(a){aa.error("Error adding alarm:",a),W(o("addAlarmDialog.errors.addFailed"))}finally{c(!1)}}},variant:"contained",color:"primary",disabled:m,"data-id-ref":"add-alarm-save-btn",children:o(m?"saving":"add")})]}),e.jsx(S,{open:z.open,autoHideDuration:3e3,onClose:G,anchorOrigin:{vertical:"bottom",horizontal:"center"},"data-id-ref":"add-alarm-dialog-snackbar",children:e.jsx(v,{onClose:G,severity:z.severity,sx:{width:"100%"},"data-id-ref":"add-alarm-dialog-snackbar-alert",children:z.message})})]})},la=r(),ra=({open:r,onClose:i,alarm:t,itemName:d,onSuccess:n})=>{const{t:o}=l(),[m,c]=a.useState(!1),[W,$]=a.useState(null),[E,z]=a.useState({}),[P,M]=a.useState({open:!1,message:"",severity:"success"}),[N,R]=a.useState({alarmType:t.alarmType||1,alarmPriority:t.alarmPriority||2,compareType:t.compareType||3,isDisabled:t.isDisabled||!1,alarmDelay:t.alarmDelay||5,message:t.message||"",messageFa:t.messageFa||"",value1:t.value1||"",value2:t.value2||"",timeout:t.timeout||null});a.useEffect(()=>{if(t){const a={alarmType:t.alarmType||1,alarmPriority:t.alarmPriority||2,compareType:t.compareType||3,isDisabled:t.isDisabled||!1,alarmDelay:t.alarmDelay||5,message:t.message||"",messageFa:t.messageFa||"",value1:t.value1||"",value2:t.value2||"",timeout:t.timeout||null};R(a),la.log("Initialized form with alarm data:",{alarm:t,formData:a})}},[t]);const B=a.useMemo(()=>5===N.compareType,[N.compareType]),H=a.useMemo(()=>2===N.alarmType,[N.alarmType]),L=a.useMemo(()=>1===N.alarmType,[N.alarmType]),O=()=>{const a={};return N.message&&N.message.length>500&&(a.message=o("editAlarmDialog.validation.messageTooLong")),N.messageFa&&N.messageFa.length>500&&(a.messageFa=o("editAlarmDialog.validation.messageFaTooLong")),1===N.alarmType&&(N.value1&&""!==N.value1.trim()?N.value1.length>100&&(a.value1=o("editAlarmDialog.validation.value1TooLong")):a.value1=o("editAlarmDialog.validation.value1Required"),5===N.compareType&&(N.value2&&""!==N.value2.trim()?N.value2.length>100&&(a.value2=o("editAlarmDialog.validation.value2TooLong")):a.value2=o("editAlarmDialog.validation.value2Required"))),2===N.alarmType&&(null===N.timeout||N.timeout<=0?a.timeout=o("editAlarmDialog.validation.timeoutRequired"):N.timeout>86400&&(a.timeout=o("editAlarmDialog.validation.timeoutRange"))),(N.alarmDelay<0||N.alarmDelay>3600)&&(a.alarmDelay=o("editAlarmDialog.validation.alarmDelayRange")),z(a),0===Object.keys(a).length},G=()=>{m||(z({}),$(null),M({open:!1,message:"",severity:"success"}),i())},V=()=>{M({...P,open:!1})};return e.jsxs(u,{open:r,onClose:G,maxWidth:"md",fullWidth:!0,"data-id-ref":"edit-alarm-dialog",children:[e.jsxs(g,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},"data-id-ref":"edit-alarm-dialog-title",children:[e.jsx(x,{variant:"h6",component:"span",children:o("editAlarmDialog.title")}),e.jsx(h,{edge:"end",onClick:G,disabled:m,"aria-label":o("close"),"data-id-ref":"edit-alarm-dialog-close-btn",children:e.jsx(q,{})})]}),e.jsxs(f,{dividers:!0,"data-id-ref":"edit-alarm-dialog-content",children:[d&&e.jsxs(e.Fragment,{children:[e.jsx(p,{sx:{mb:2},"data-id-ref":"edit-alarm-item-info",children:e.jsxs(x,{variant:"body2",color:"text.secondary",children:[o("editAlarmDialog.itemName"),": ",e.jsx("strong",{children:d})]})}),e.jsx(y,{sx:{mb:2}})]}),W&&e.jsx(v,{severity:"error",sx:{mb:2},"data-id-ref":"edit-alarm-error-alert",children:W}),e.jsxs(p,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(b,{fullWidth:!0,"data-id-ref":"edit-alarm-type-field",children:[e.jsx(j,{id:"alarm-type-label",children:o("editAlarmDialog.fields.alarmType")}),e.jsxs(D,{labelId:"alarm-type-label",value:N.alarmType,label:o("editAlarmDialog.fields.alarmType"),onChange:a=>R({...N,alarmType:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.type.comparative")}),e.jsx(w,{value:2,children:o("alarms.type.timeout")})]})]}),e.jsxs(b,{fullWidth:!0,"data-id-ref":"edit-alarm-priority-field",children:[e.jsx(j,{id:"alarm-priority-label",children:o("editAlarmDialog.fields.alarmPriority")}),e.jsxs(D,{labelId:"alarm-priority-label",value:N.alarmPriority,label:o("editAlarmDialog.fields.alarmPriority"),onChange:a=>R({...N,alarmPriority:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.priority.medium")}),e.jsx(w,{value:2,children:o("alarms.priority.high")})]})]}),L&&e.jsxs(b,{fullWidth:!0,"data-id-ref":"edit-alarm-compare-type-field",children:[e.jsx(j,{id:"compare-type-label",children:o("editAlarmDialog.fields.compareType")}),e.jsxs(D,{labelId:"compare-type-label",value:N.compareType,label:o("editAlarmDialog.fields.compareType"),onChange:a=>R({...N,compareType:a.target.value}),disabled:m,children:[e.jsx(w,{value:1,children:o("alarms.condition.equal")}),e.jsx(w,{value:2,children:o("alarms.condition.notEqual")}),e.jsx(w,{value:3,children:o("alarms.condition.higher")}),e.jsx(w,{value:4,children:o("alarms.condition.lower")}),e.jsx(w,{value:5,children:o("alarms.condition.between")})]})]}),L&&e.jsx(A,{fullWidth:!0,label:o("editAlarmDialog.fields.value1"),value:N.value1,onChange:a=>R({...N,value1:a.target.value}),error:Boolean(E.value1),helperText:E.value1||o("editAlarmDialog.hints.value1"),disabled:m,"data-id-ref":"edit-alarm-value1-field"}),L&&B&&e.jsx(A,{fullWidth:!0,label:o("editAlarmDialog.fields.value2"),value:N.value2,onChange:a=>R({...N,value2:a.target.value}),error:Boolean(E.value2),helperText:E.value2||o("editAlarmDialog.hints.value2"),disabled:m,"data-id-ref":"edit-alarm-value2-field"}),e.jsx(A,{fullWidth:!0,type:"number",label:o("editAlarmDialog.fields.alarmDelay"),value:N.alarmDelay,onChange:a=>R({...N,alarmDelay:parseInt(a.target.value)||0}),error:Boolean(E.alarmDelay),helperText:E.alarmDelay||o("editAlarmDialog.hints.alarmDelay"),disabled:m,inputProps:{min:0,max:3600},"data-id-ref":"edit-alarm-delay-field"}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:o("editAlarmDialog.fields.message"),value:N.message,onChange:a=>R({...N,message:a.target.value}),error:Boolean(E.message),helperText:E.message||o("editAlarmDialog.hints.message"),disabled:m,"data-id-ref":"edit-alarm-message-field"}),e.jsx(A,{fullWidth:!0,multiline:!0,rows:3,label:o("editAlarmDialog.fields.messageFa"),value:N.messageFa,onChange:a=>R({...N,messageFa:a.target.value}),error:Boolean(E.messageFa),helperText:E.messageFa||o("editAlarmDialog.hints.messageFa"),disabled:m,"data-id-ref":"edit-alarm-message-fa-field"}),H&&e.jsx(A,{fullWidth:!0,type:"number",label:o("editAlarmDialog.fields.timeout"),value:N.timeout??"",onChange:a=>R({...N,timeout:a.target.value?parseInt(a.target.value):null}),error:Boolean(E.timeout),helperText:E.timeout||o("editAlarmDialog.hints.timeout"),disabled:m,inputProps:{min:1,max:86400},"data-id-ref":"edit-alarm-timeout-field"}),e.jsx(C,{control:e.jsx(I,{checked:N.isDisabled,onChange:a=>R({...N,isDisabled:a.target.checked}),disabled:m,"data-id-ref":"edit-alarm-disabled-switch"}),label:o("editAlarmDialog.fields.isDisabled"),"data-id-ref":"edit-alarm-disabled-field"})]})]}),e.jsxs(T,{"data-id-ref":"edit-alarm-dialog-actions",children:[e.jsx(k,{onClick:G,disabled:m,"data-id-ref":"edit-alarm-cancel-btn",children:o("cancel")}),e.jsx(k,{onClick:async()=>{if($(null),O()){c(!0);try{const a={id:t.id,itemId:t.itemId,isDisabled:N.isDisabled,alarmDelay:N.alarmDelay,message:N.message||null,messageFa:N.messageFa||null,value1:N.value1||null,value2:N.value2||null,timeout:N.timeout,alarmType:N.alarmType,alarmPriority:N.alarmPriority,compareType:N.compareType};la.log("Editing alarm:",a);const e=await s(a);e.success?(la.log("Alarm edited successfully:",e),M({open:!0,message:e.message||o("editAlarmDialog.success.updated"),severity:"success"}),n?.(),setTimeout(()=>{G()},1e3)):(la.error("Failed to edit alarm:",e),$(e.message||o("editAlarmDialog.errors.updateFailed")))}catch(a){la.error("Error editing alarm:",a),$(o("editAlarmDialog.errors.updateFailed"))}finally{c(!1)}}},variant:"contained",color:"primary",disabled:m,startIcon:m?e.jsx(F,{size:16}):null,"data-id-ref":"edit-alarm-save-btn",children:o(m?"saving":"save")})]}),e.jsx(S,{open:P.open,autoHideDuration:3e3,onClose:V,anchorOrigin:{vertical:"bottom",horizontal:"center"},"data-id-ref":"edit-alarm-dialog-snackbar",children:e.jsx(v,{onClose:V,severity:P.severity,sx:{width:"100%"},"data-id-ref":"edit-alarm-dialog-snackbar-alert",children:P.message})})]})},ia=r(),sa=({open:r,onClose:i,alarm:s,itemName:d,onSuccess:n})=>{const{t:o,language:m}=l(),[c,h]=a.useState(!1),[y,b]=a.useState(null),j=()=>{c||(b(null),i())};return e.jsxs(u,{open:r,onClose:j,maxWidth:"sm",fullWidth:!0,"data-id-ref":"delete-alarm-dialog",children:[e.jsx(g,{"data-id-ref":"delete-alarm-dialog-title",children:e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(H,{color:"error","data-id-ref":"delete-alarm-warning-icon"}),e.jsx(x,{variant:"h6",component:"span",children:o("alarms.delete.confirmTitle")})]})}),e.jsxs(f,{"data-id-ref":"delete-alarm-dialog-content",children:[y&&e.jsx(v,{severity:"error",sx:{mb:2},"data-id-ref":"delete-alarm-error-alert",children:y}),e.jsx(x,{variant:"body1",sx:{mb:2},"data-id-ref":"delete-alarm-warning-text",children:o("alarms.delete.confirmMessage")}),e.jsxs(p,{sx:{p:2,bgcolor:"background.default",borderRadius:1,border:1,borderColor:"divider"},"data-id-ref":"delete-alarm-details",children:[d&&e.jsxs(x,{variant:"body2",sx:{mb:1},"data-id-ref":"delete-alarm-item-name",children:[e.jsxs("strong",{children:[o("alarms.columns.itemName"),":"]})," ",d]}),e.jsxs(x,{variant:"body2",sx:{mb:1},"data-id-ref":"delete-alarm-message",children:[e.jsxs("strong",{children:[o("alarms.columns.message"),":"]})," ",s?"fa"===m?s.messageFa||s.message||o("alarms.noMessage"):s.message||s.messageFa||o("alarms.noMessage"):o("unknown")]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{variant:"body2",sx:{mb:1},"data-id-ref":"delete-alarm-priority",children:[e.jsxs("strong",{children:[o("alarms.columns.priority"),":"]})," ",2===s.alarmPriority?o("alarms.priority.high"):o("alarms.priority.medium")]}),e.jsxs(x,{variant:"body2","data-id-ref":"delete-alarm-type",children:[e.jsxs("strong",{children:[o("alarms.columns.type"),":"]})," ",1===s.alarmType?o("alarms.type.comparative"):o("alarms.type.timeout")]})]})]}),e.jsx(v,{severity:"warning",sx:{mt:2},"data-id-ref":"delete-alarm-warning-alert",children:o("alarms.delete.warningMessage")})]}),e.jsxs(T,{sx:{px:3,pb:2},"data-id-ref":"delete-alarm-dialog-actions",children:[e.jsx(k,{onClick:j,disabled:c,"data-id-ref":"delete-alarm-cancel-btn",children:o("cancel")}),e.jsx(k,{onClick:async()=>{if(s&&s.id){b(null),h(!0);try{ia.log("Deleting alarm:",{alarmId:s.id});const a={id:s.id},e=await t(a);if(e.success)ia.log("Alarm deleted successfully:",{alarmId:s.id}),n(),i();else{const a=e.message||o("alarms.delete.errorDeletingAlarm");ia.error("Failed to delete alarm:",{alarmId:s.id,error:a}),b(a)}}catch(a){ia.error("Error deleting alarm:",a),b(o("alarms.delete.errorDeletingAlarm"))}finally{h(!1)}}else b(o("alarms.delete.noAlarmId"))},variant:"contained",color:"error",disabled:c,startIcon:c?e.jsx(F,{size:20}):e.jsx(H,{}),"data-id-ref":"delete-alarm-confirm-btn",children:o(c?"deleting":"delete")})]})]})},ta=r(),da=({open:r,onClose:i,alarmId:s,alarmMessage:t,onSuccess:m})=>{const{t:c,language:A}=l(),S=W(),M=$(S.breakpoints.down("sm")),{state:N}=d(),[R,B]=a.useState(!0),[H,J]=a.useState(!1),[K,Q]=a.useState(null),[U,X]=a.useState(null),[Y,Z]=a.useState([]),_=a.useMemo(()=>N.items.filter(a=>2===a.itemType),[N.items]),aa=a.useCallback(async()=>{B(!0),Q(null);try{ta.log("Fetching external alarms for alarmId:",s);const a={alarmId:s},e=await n(a);if(ta.log("External alarms fetched successfully:",{count:e.externalAlarms?.length||0,success:e.success}),e.success&&e.externalAlarms){const a=e.externalAlarms.map(a=>({id:a.id||"",itemId:a.itemId||"",value:a.value||!1,isDisabled:a.isDisabled||!1}));Z(a)}else Z([])}catch(a){ta.error("Error fetching external alarms:",a),Q(c("externalAlarms.errorLoading"))}finally{B(!1)}},[s,c]);a.useEffect(()=>{r&&aa()},[r,aa]);const ea=a.useCallback(()=>{const a={id:`temp-${Date.now()}`,itemId:"",value:!1,isDisabled:!1,isNew:!0};Z(e=>[...e,a]),ta.log("Added new external alarm row")},[]),la=a.useCallback(a=>{Z(e=>{const l=e.find(e=>e.id===a);return l?.isNew?e.filter(e=>e.id!==a):e.map(e=>e.id===a?{...e,isDeleted:!0}:e)}),ta.log("Deleted external alarm row:",a)},[]),ra=a.useCallback((a,e,l)=>{Z(r=>r.map(r=>{if(r.id===a){const a={...r,[e]:l};return r.isNew||(a.isModified=!0),a}return r}))},[]),ia=a.useMemo(()=>{const a=Y.some(a=>a.isNew&&!a.isDeleted),e=Y.some(a=>a.isModified&&!a.isDeleted),l=Y.some(a=>a.isDeleted);return a||e||l},[Y]),sa=a.useCallback(()=>{const a=Y.filter(a=>!a.isDeleted);for(const r of a)if(!r.itemId)return c("externalAlarms.validation.itemRequired");const e=a.map(a=>a.itemId),l=new Set(e);return e.length!==l.size?c("externalAlarms.validation.duplicateItem"):null},[Y,c]),da=a.useCallback(async()=>{X(null);const a=sa();if(a)X(a);else{J(!0);try{const a=Y.filter(a=>a.isNew&&!a.isDeleted).map(a=>({id:"00000000-0000-0000-0000-000000000000",itemId:a.itemId,value:a.value,isDisabled:a.isDisabled})),e=Y.filter(a=>a.isModified&&!a.isNew&&!a.isDeleted).map(a=>({id:a.id,itemId:a.itemId,value:a.value,isDisabled:a.isDisabled})),l=Y.filter(a=>a.isDeleted&&!a.isNew).map(a=>({id:a.id,itemId:a.itemId,value:a.value,isDisabled:a.isDisabled}));ta.log("Saving external alarms:",{added:a.length,changed:e.length,removed:l.length});const r={alarmId:s,added:a.length>0?a:[],changed:e.length>0?e:[],removed:l.length>0?l:[]};await o(r),ta.log("External alarms saved successfully"),m?.(),i()}catch(e){ta.error("Error saving external alarms:",e),X(c("externalAlarms.errorSaving"))}finally{J(!1)}}},[s,Y,sa,c,m,i]),na=a.useCallback(()=>{ia?window.confirm(c("externalAlarms.confirmDiscard"))&&i():i()},[ia,i,c]);return e.jsxs(u,{open:r,onClose:na,maxWidth:"md",fullWidth:!0,fullScreen:M,"data-id-ref":"manage-external-alarms-dialog",PaperProps:{sx:{minHeight:M?"100vh":"70vh",maxHeight:M?"100vh":"90vh"}},children:[e.jsxs(g,{"data-id-ref":"manage-external-alarms-dialog-title",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:1},children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(L,{color:"primary"}),e.jsx(x,{variant:"h6",component:"span",children:c("externalAlarms.title")})]}),e.jsx(h,{edge:"end",color:"inherit",onClick:na,"aria-label":"close","data-id-ref":"manage-external-alarms-dialog-close-btn",children:e.jsx(q,{})})]}),e.jsx(y,{}),e.jsxs(f,{"data-id-ref":"manage-external-alarms-dialog-content",sx:{pt:2},children:[t&&e.jsx(v,{severity:"info",sx:{mb:2},"data-id-ref":"manage-external-alarms-alarm-info",children:e.jsxs(x,{variant:"body2",children:[e.jsxs("strong",{children:[c("externalAlarms.alarmMessage"),":"]})," ",t]})}),R&&e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,gap:2},"data-id-ref":"manage-external-alarms-loading",children:[e.jsx(F,{size:48}),e.jsx(x,{variant:"body2",color:"text.secondary",children:c("loading")})]}),K&&!R&&e.jsx(v,{severity:"error","data-id-ref":"manage-external-alarms-error",action:e.jsx(k,{color:"inherit",size:"small",onClick:aa,children:c("retry")}),children:K}),U&&e.jsx(v,{severity:"error",sx:{mb:2},"data-id-ref":"manage-external-alarms-save-error",children:U}),!R&&!K&&e.jsxs(p,{"data-id-ref":"manage-external-alarms-list",children:[e.jsx(p,{sx:{mb:2},"data-id-ref":"manage-external-alarms-add-section",children:e.jsx(k,{variant:"outlined",color:"primary",startIcon:e.jsx(O,{}),onClick:ea,disabled:H,"data-id-ref":"manage-external-alarms-add-btn",children:c("externalAlarms.addNew")})}),0===Y.filter(a=>!a.isDeleted).length&&e.jsx(E,{elevation:0,sx:{p:3,textAlign:"center",bgcolor:"background.default",border:1,borderColor:"divider"},"data-id-ref":"manage-external-alarms-empty",children:e.jsx(x,{variant:"body2",color:"text.secondary",children:c("externalAlarms.noExternalAlarms")})}),e.jsx(z,{spacing:2,"data-id-ref":"manage-external-alarms-rows",children:Y.filter(a=>!a.isDeleted).map((a,l)=>e.jsx(E,{elevation:1,sx:{p:2,border:1,borderColor:a.isNew?"success.main":a.isModified?"warning.main":"divider",bgcolor:a.isNew?"success.50":a.isModified?"warning.50":"background.paper"},"data-id-ref":`manage-external-alarms-row-${l}`,children:e.jsxs(z,{spacing:2,children:[e.jsxs(b,{fullWidth:!0,"data-id-ref":`manage-external-alarms-item-select-${l}`,children:[e.jsx(j,{id:`item-select-label-${a.id}`,children:c("externalAlarms.item")}),e.jsxs(D,{labelId:`item-select-label-${a.id}`,value:a.itemId,label:c("externalAlarms.item"),onChange:e=>ra(a.id,"itemId",e.target.value),disabled:H,error:!a.itemId,children:[e.jsx(w,{value:"",disabled:!0,children:e.jsx("em",{children:c("externalAlarms.selectItem")})}),_.map(a=>e.jsx(w,{value:a.id,children:"fa"===A&&a.nameFa||a.name},a.id))]})]}),e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},"data-id-ref":`manage-external-alarms-controls-${l}`,children:[e.jsx(C,{control:e.jsx(I,{checked:a.value,onChange:e=>ra(a.id,"value",e.target.checked),disabled:H,"data-id-ref":`manage-external-alarms-value-switch-${l}`}),label:e.jsxs(x,{variant:"body2",children:[c("externalAlarms.outputValue"),": ",a.value?c("on"):c("off")]})}),e.jsx(C,{control:e.jsx(I,{checked:!a.isDisabled,onChange:e=>ra(a.id,"isDisabled",!e.target.checked),disabled:H,"data-id-ref":`manage-external-alarms-enabled-switch-${l}`}),label:e.jsx(x,{variant:"body2",children:a.isDisabled?c("disabled"):c("enabled")})}),e.jsx(P,{title:c("delete"),children:e.jsx(h,{color:"error",onClick:()=>la(a.id),disabled:H,"data-id-ref":`manage-external-alarms-delete-btn-${l}`,children:e.jsx(G,{})})})]})]})},a.id))})]})]}),e.jsx(y,{}),e.jsxs(T,{"data-id-ref":"manage-external-alarms-dialog-actions",sx:{px:3,py:2},children:[e.jsx(k,{onClick:na,disabled:H,"data-id-ref":"manage-external-alarms-cancel-btn",children:c("cancel")}),e.jsx(k,{onClick:da,variant:"contained",color:"primary",disabled:!ia||H||R,startIcon:H?e.jsx(F,{size:20}):e.jsx(V,{}),"data-id-ref":"manage-external-alarms-save-btn",children:c(H?"saving":"save")})]})]})},na=r(),oa=()=>{const[r]=_(),i=r.get("itemId"),{t:s,language:t}=l(),o=W(),u=$(o.breakpoints.down("md")),{state:g}=d(),[h,f]=a.useState(null),[b,j]=a.useState([]),[D,w]=a.useState(!1),[A,C]=a.useState(new Set),[I,T]=a.useState(!1),[S,P]=a.useState(!1),[q,H]=a.useState(!1),[V,aa]=a.useState(null),[la,ia]=a.useState(null),[ta,oa]=a.useState(!1),[ma,ca]=a.useState(null),ua=a.useMemo(()=>{const a=new Map;return g.items.forEach(e=>{e.id&&a.set(e.id,e)}),na.log("Created items map from MonitoringContext:",{size:a.size,itemsCount:g.items.length}),a},[g.items]),ga=a.useRef(null),[xa,ha]=a.useState([]),fa=a.useCallback(a=>{const e=a;e.data?(ha([e.data]),na.log("Row selection changed:",{count:1})):ha([])},[]),pa=a.useCallback((a,e)=>!a&&e?e:a?"fa"===t?a.nameFa||a.name||s("unknown"):a.name||s("unknown"):s("unknown"),[t,s]),ya=a.useCallback((a,e)=>{const l=a.compareType,r=a.value1||"",i=a.value2||"",d="fa"===t?e?.unitFa||e?.unit||"":e?.unit||"";switch(l){case 1:return`${s("alarms.condition.equal")} ${r} ${d}`;case 2:return`${s("alarms.condition.notEqual")} ${r} ${d}`;case 3:return`${s("alarms.condition.higher")} ${r} ${d}`;case 4:return`${s("alarms.condition.lower")} ${r} ${d}`;case 5:return`${s("alarms.condition.between")} ${r} ${s("and")} ${i} ${d}`;default:return na.warn("Unknown comparison type encountered:",{compareType:l,alarmId:a.id}),`${s("unknown")} (${l})`}},[t,s]),va=a.useCallback(async()=>{if(i){f(null),w(!0);try{na.log("Fetching alarms for itemId:",i);const a={itemIds:[i]},e=await m(a);na.log("Alarms fetched successfully:",{count:e.data?.data?.length||0});const l=(e.data?.data||[]).map(a=>{const e=a.itemId?ua.get(a.itemId):void 0;return{...a,itemName:pa(e,a.itemId||void 0)}});j(l)}catch(a){na.error("Error fetching alarms:",a),f(s("activeAlarmsPage.errorLoadingAlarms"))}finally{w(!1)}}else f(s("noItemIdProvided"))},[i,ua,pa,s]),ba=a.useCallback(async a=>{C(e=>new Set(e).add(a));try{na.log("Fetching external alarms for alarmId:",a);const e={alarmId:a},l=await n(e);na.log("External alarms fetched successfully:",{count:l.externalAlarms?.length||0,success:l.success}),l.success&&l.externalAlarms&&j(e=>e.map(e=>e.id===a?{...e,hasExternalAlarmsData:!0,externalAlarmsCount:l.externalAlarms?.length||0}:e))}catch(e){na.error("Error fetching external alarms:",e)}finally{C(e=>{const l=new Set(e);return l.delete(a),l})}},[]);a.useEffect(()=>{i&&va()},[i,ua]);const ja=a.useCallback(a=>{const l=a,r=l.alarmPriority,i=s(2===r?"alarms.priority.high":"alarms.priority.medium"),t=2===r?"error":"warning";return e.jsx(M,{label:i,color:t,size:"small","data-id-ref":`alarm-priority-chip-${l.id}`,sx:{fontWeight:600}})},[s]),Da=a.useCallback(a=>{const l=a,r=l.isDisabled,i=s(r?"alarms.status.disabled":"alarms.status.enabled"),t=r?"default":"success",d=r?e.jsx(Y,{fontSize:"small"}):e.jsx(Z,{fontSize:"small"});return e.jsx(M,{label:i,color:t,size:"small",icon:d,"data-id-ref":`alarm-status-chip-${l.id}`,sx:{fontWeight:600}})},[s]),wa=a.useCallback(a=>{const l=a,r=l.id,i=l.hasExternalAlarm,t=l.hasExternalAlarmsData,d=l.externalAlarmsCount||0,n=!!r&&A.has(r);return i?t||n?n?e.jsx(F,{size:20,"data-id-ref":`alarm-external-spinner-${r}`}):e.jsx(M,{label:`${d} ${s("alarms.externalAlarms.count")}`,size:"small",color:"info",icon:e.jsx(L,{fontSize:"small"}),"data-id-ref":`alarm-external-chip-count-${r}`,sx:{fontWeight:600}}):e.jsx(k,{size:"small",variant:"outlined",startIcon:e.jsx(L,{}),onClick:()=>r&&ba(r),"data-id-ref":`alarm-external-btn-load-${r}`,sx:{textTransform:"none"},children:s("alarms.externalAlarms.load")}):e.jsx(M,{label:s("alarms.externalAlarms.none"),size:"small",icon:e.jsx(J,{fontSize:"small"}),"data-id-ref":`alarm-external-chip-none-${r}`})},[s,A,ba]),Aa=a.useMemo(()=>b.map(a=>{const e=a.itemId?ua.get(a.itemId):void 0,l="fa"===t?a.messageFa||a.message:a.message||a.messageFa;return{...a,messageDisplay:l||s("alarms.noMessage"),conditionDisplay:ya(a,e),alarmTypeDisplay:1===a.alarmType?s("alarms.type.comparative"):s("alarms.type.timeout"),delayDisplay:a.alarmDelay?`${a.alarmDelay}${s("alarms.seconds")}`:`0${s("alarms.seconds")}`,timeoutDisplay:a.timeout?`${a.timeout}${s("alarms.seconds")}`:s("alarms.noTimeout")}}),[b,ua,t,s,ya]),Ca=a.useMemo(()=>[{field:"itemName",headerText:s("alarms.columns.itemName"),width:200,minWidth:150,allowSorting:!0,allowFiltering:!0},{field:"messageDisplay",headerText:s("alarms.columns.message"),width:250,minWidth:200,allowSorting:!0,allowFiltering:!0},{field:"conditionDisplay",headerText:s("alarms.columns.condition"),width:200,minWidth:150,allowSorting:!0,allowFiltering:!0},{field:"alarmTypeDisplay",headerText:s("alarms.columns.type"),width:140,minWidth:120,allowSorting:!0,allowFiltering:!0},{field:"alarmPriority",headerText:s("alarms.columns.priority"),width:140,minWidth:120,allowSorting:!0,allowFiltering:!0,template:ja},{field:"delayDisplay",headerText:s("alarms.columns.delay"),width:110,minWidth:90,allowSorting:!0},{field:"timeoutDisplay",headerText:s("alarms.columns.timeout"),width:130,minWidth:100,allowSorting:!0},{field:"isDisabled",headerText:s("alarms.columns.status"),width:140,minWidth:120,allowSorting:!0,allowFiltering:!0,template:Da},{field:"hasExternalAlarm",headerText:s("alarms.columns.externalAlarms"),width:180,minWidth:150,allowSorting:!0,allowFiltering:!0,template:wa}],[s,ja,Da,wa]),Ia=a.useCallback(()=>{ga.current?.csvExport({fileName:"alarms-export.csv"}),na.log("Exporting alarms data to CSV")},[]),Ta=a.useCallback(()=>{ga.current?.excelExport({fileName:"alarms-export.xlsx"}),na.log("Exporting alarms data to Excel")},[]),ka=a.useCallback(()=>{na.log("Add new alarm for itemId:",i),T(!0)},[i]),Sa=a.useCallback(()=>{na.log("Alarm added successfully, refreshing data"),va()},[va]),Fa=a.useCallback(()=>{T(!1)},[]),Wa=a.useCallback(()=>{1===xa.length&&(na.log("View external alarms for selected alarm:",xa[0]),ca(xa[0]),oa(!0))},[xa]),$a=a.useCallback(()=>{na.log("External alarms updated successfully, refreshing data"),ca(null),va()},[va]),Ea=a.useCallback(()=>{oa(!1),ca(null)},[]),za=a.useCallback(()=>{1===xa.length&&(na.log("Opening edit dialog for alarm:",xa[0]),aa(xa[0]),P(!0))},[xa]),Pa=a.useCallback(()=>{na.log("Alarm edited successfully, refreshing data"),aa(null),va()},[va]),Ma=a.useCallback(()=>{P(!1),aa(null)},[]),Na=a.useCallback(()=>{1===xa.length&&(na.log("Opening delete confirmation for alarm:",xa[0]),ia(xa[0]),H(!0))},[xa]),Ra=a.useCallback(()=>{na.log("Alarm deleted successfully, refreshing data"),ia(null),va()},[va]),Ba=a.useCallback(()=>{H(!1),ia(null)},[]);return D&&0===b.length?e.jsxs(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:400,gap:2},"data-id-ref":"alarms-detail-loading",children:[e.jsx(F,{size:48}),e.jsx(x,{variant:"body1",color:"text.secondary",children:s("loading")})]}):h&&0===b.length?e.jsx(p,{sx:{p:3},"data-id-ref":"alarms-detail-error-container",children:e.jsx(v,{severity:"error","data-id-ref":"alarms-detail-error-alert",action:e.jsx(k,{color:"inherit",size:"small",onClick:va,startIcon:e.jsx(K,{}),"data-id-ref":"alarms-detail-error-retry-btn",children:s("retry")}),children:h})}):i?e.jsxs(p,{sx:{width:"100%",height:"100%",display:"flex",flexDirection:"column",p:u?1:3,boxSizing:"border-box",overflow:"hidden"},"data-id-ref":"alarms-detail-page",children:[e.jsx(N,{elevation:2,"data-id-ref":"alarms-detail-card",sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:e.jsxs(R,{sx:{display:"flex",flexDirection:"column",p:{xs:2,sm:3},flex:1,minHeight:0,overflow:"hidden","&:last-child":{pb:{xs:2,sm:3}}},"data-id-ref":"alarms-detail-card-content",children:[e.jsxs(p,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,flexWrap:"wrap",gap:2},"data-id-ref":"alarms-detail-header",children:[e.jsx(x,{variant:"h5",component:"h1",sx:{fontWeight:700,color:"primary.main"},"data-id-ref":"alarms-detail-title",children:s("alarmsDetail")}),e.jsxs(z,{direction:"row",spacing:1,"data-id-ref":"alarms-detail-actions",children:[e.jsx(k,{variant:"outlined",startIcon:e.jsx(K,{}),onClick:va,disabled:D,size:u?"small":"medium","data-id-ref":"alarms-detail-refresh-btn",children:s("refresh")}),e.jsx(k,{variant:"outlined",startIcon:e.jsx(Q,{}),onClick:Ia,disabled:0===b.length,size:u?"small":"medium","data-id-ref":"alarms-detail-export-csv-btn",children:s("exportCsv")}),e.jsx(k,{variant:"outlined",startIcon:e.jsx(Q,{}),onClick:Ta,disabled:0===b.length,size:u?"small":"medium","data-id-ref":"alarms-detail-export-excel-btn",children:s("exportExcel")})]})]}),e.jsx(y,{sx:{mb:2},"data-id-ref":"alarms-detail-divider"}),e.jsx(E,{elevation:0,sx:{mb:2,border:1,borderColor:"divider"},"data-id-ref":"alarms-detail-toolbar-paper",children:e.jsxs(B,{sx:{gap:1,minHeight:{xs:56,sm:64},px:{xs:2,sm:3}},"data-id-ref":"alarms-detail-toolbar",children:[e.jsx(x,{variant:"body2",sx:{flexGrow:1,color:"text.secondary"},"data-id-ref":"alarms-detail-selected-count",children:xa.length>0?`${xa.length} ${s("selected")}`:s("alarms.toolbar.selectRowsHint")}),e.jsx(k,{variant:"contained",color:"primary",startIcon:e.jsx(O,{}),onClick:ka,size:u?"small":"medium","data-id-ref":"alarms-toolbar-add-btn",sx:{alignItems:"center","& .MuiButton-startIcon":{display:"flex",alignItems:"center",marginInlineEnd:1}},children:s("add")}),e.jsx(k,{variant:"outlined",color:"warning",startIcon:e.jsx(U,{}),onClick:Wa,disabled:1!==xa.length,size:u?"small":"medium","data-id-ref":"alarms-toolbar-alarms-btn",sx:{alignItems:"center","& .MuiButton-startIcon":{display:"flex",alignItems:"center",marginInlineEnd:1}},children:s("alarms.actions.viewAlarms")}),e.jsx(k,{variant:"outlined",color:"primary",startIcon:e.jsx(X,{}),onClick:za,disabled:1!==xa.length,size:u?"small":"medium","data-id-ref":"alarms-toolbar-edit-btn",sx:{alignItems:"center","& .MuiButton-startIcon":{display:"flex",alignItems:"center",marginInlineEnd:1}},children:s("alarms.actions.edit")}),e.jsx(k,{variant:"outlined",color:"error",startIcon:e.jsx(G,{}),onClick:Na,disabled:1!==xa.length,size:u?"small":"medium","data-id-ref":"alarms-toolbar-delete-btn",sx:{alignItems:"center","& .MuiButton-startIcon":{display:"flex",alignItems:"center",marginInlineEnd:1}},children:s("alarms.actions.delete")})]})}),e.jsx(E,{elevation:0,sx:{p:2,mb:2,bgcolor:"background.default",border:1,borderColor:"divider"},"data-id-ref":"alarms-detail-summary",children:e.jsxs(z,{direction:"row",spacing:3,flexWrap:"wrap",children:[e.jsxs(p,{"data-id-ref":"alarms-detail-summary-total",children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:s("alarms.summary.total")}),e.jsx(x,{variant:"h6",fontWeight:700,children:b.length})]}),e.jsxs(p,{"data-id-ref":"alarms-detail-summary-enabled",children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:s("alarms.summary.enabled")}),e.jsx(x,{variant:"h6",fontWeight:700,color:"success.main",children:b.filter(a=>!a.isDisabled).length})]}),e.jsxs(p,{"data-id-ref":"alarms-detail-summary-disabled",children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:s("alarms.summary.disabled")}),e.jsx(x,{variant:"h6",fontWeight:700,color:"text.disabled",children:b.filter(a=>a.isDisabled).length})]}),e.jsxs(p,{"data-id-ref":"alarms-detail-summary-high-priority",children:[e.jsx(x,{variant:"caption",color:"text.secondary",children:s("alarms.summary.highPriority")}),e.jsx(x,{variant:"h6",fontWeight:700,color:"error.main",children:b.filter(a=>2===a.alarmPriority).length})]})]})}),e.jsx(p,{sx:{width:"100%",minWidth:0,flex:1,minHeight:0,display:"flex",flexDirection:"column"},"data-id-ref":"alarms-detail-grid-container",children:e.jsx(c,{ref:ga,data:Aa,columns:Ca,height:"100%",allowPaging:!0,allowSorting:!0,allowFiltering:!0,allowResizing:!0,allowExcelExport:!0,pageSettings:{pageSize:20,pageSizes:[10,20,50,100]},onRowSelected:fa})})]})}),i&&e.jsx(ea,{open:I,onClose:Fa,itemId:i,itemName:i?pa(ua.get(i),i):void 0,onSuccess:Sa}),V&&e.jsx(ra,{open:S,onClose:Ma,alarm:V,itemName:V.itemId?pa(ua.get(V.itemId),V.itemId):void 0,onSuccess:Pa}),e.jsx(sa,{open:q,onClose:Ba,alarm:la,itemName:la?.itemId?pa(ua.get(la.itemId),la.itemId):void 0,onSuccess:Ra}),ma&&ma.id&&e.jsx(da,{open:ta,onClose:Ea,alarmId:ma.id,alarmMessage:"fa"===t?ma.messageFa||ma.message||void 0:ma.message||ma.messageFa||void 0,onSuccess:$a})]}):e.jsx(p,{sx:{p:3},"data-id-ref":"alarms-detail-no-item-container",children:e.jsx(v,{severity:"warning","data-id-ref":"alarms-detail-no-item-alert",children:s("noItemIdProvided")})})};export{oa as default};
