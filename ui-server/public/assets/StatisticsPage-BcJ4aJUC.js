import{bI as t,bQ as a}from"./vendor-TAwwu7tv.js";import{a as e,e as i,T as s,U as r,V as n,W as l,X as d,Y as o,c,Z as m,_ as x,$ as u,a0 as h,a1 as f}from"./layout-C1_h6sDC.js";import{f as p}from"./dateFormatting-Oyh3Sj-d.js";import{I as g}from"./api-D5q9v5qU.js";import{S as y}from"./SeparatedDateTimePicker-Br7Be0Cr.js";import{E as j}from"./EChartsWrapper-CXD6P99r.js";import{C as v}from"./CardHeader-m1cb-2SA.js";import{u as b,d as D,B as $,c as F,a as I,x as w,q as S,I as C,r as A,a7 as V,a8 as W,v as P,a1 as M,P as k,a2 as R,a3 as L,a4 as z,a5 as E,a6 as T,D as B}from"./mui-core-im59jMHH.js";import{R as N,w as H,ac as q,ad as O,B as X,as as _,T as Q,at as U,au as Y}from"./mui-icons-v3eeVnKX.js";import{c as Z}from"./react-router-B0bL9ISA.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./echarts-DOIPydnp.js";const G=c(),J=()=>{const{t:c,language:J}=e(),K=b(),[tt]=Z(),at=tt.get("itemId"),et=D(K.breakpoints.down("md")),{state:it}=i(),st=it.items.find(t=>t.id===at),rt=it.itemsLoading,nt=t.useMemo(()=>!st||st.itemType===g.AnalogInput||st.itemType===g.AnalogOutput,[st]),[lt,dt]=t.useState(null),[ot,ct]=t.useState(!1),[mt,xt]=t.useState("last30Days"),[ut,ht]=t.useState(""),[ft,pt]=t.useState(""),[gt,yt]=t.useState(et),[jt,vt]=t.useState(null),[bt,Dt]=t.useState(null),[$t,Ft]=t.useState(null),It=t.useMemo(()=>{const t=Math.floor(Date.now()/1e3);let a,e=t;switch(mt){case"last24Hours":a=t-86400;break;case"last7Days":a=t-604800;break;case"last30Days":default:a=t-2592e3;break;case"custom":ut&&ft?(a=Math.floor(new Date(ut).getTime()/1e3),e=Math.floor(new Date(ft).getTime()/1e3)):a=t-2592e3}return{startDate:a,endDate:e}},[mt,ut,ft]),wt=t.useMemo(()=>{const{startDate:t,endDate:a}=It,e=p(t,J,"short"),i=p(a,J,"short");return"fa"===J?`${c("from")} ${e} ${c("to")} ${i}`:`${c("from")}: ${e} ${c("to")}: ${i}`},[It,J,c]),St=t.useMemo(()=>st?"fa"===J&&st.nameFa?st.nameFa:st.name:c("unknown"),[st,rt,J,c]),Ct=t.useMemo(()=>st?"fa"===J&&st.unitFa?st.unitFa:st.unit??"":"",[st,J]),At=t.useCallback(t=>{if(!t)return!1;const a=(t.message||"").toString().toLowerCase();return Boolean(t.cancelled||"ERR_CANCELED"===t.code||"CanceledError"===t.name||a.includes("cancel")||a.includes("abort"))},[]),Vt=async()=>{if(at)try{if(nt){const[t,a,e,i,o]=await Promise.all([s({itemId:at}),r({itemId:at}),n({itemId:at}),l({itemId:at}),d({itemId:at})]);vt({mean:t.mean,min:a.min,max:e.max,std:i.std,count:o.count})}else{const t=Math.floor(Date.now()/1e3),a=t-86400,[e,i,s]=await Promise.all([o({itemId:at,startDate:a,endDate:t,value:"1"}),o({itemId:at,startDate:a,endDate:t,value:"0"}),d({itemId:at})]),r=t-a,n=e.success?e.totalDurationSeconds:0,l=i.success?i.totalDurationSeconds:0;vt({onDuration:n,offDuration:l,totalDuration:r,onPercentage:r>0?n/r*100:0,offPercentage:r>0?l/r*100:0,count:s.count})}}catch(t){G.error("Error fetching last 24h statistics:",t)}},Wt=async()=>{if(at){dt(null),ct(!0);try{const{startDate:a,endDate:e}=It,i="fa"===J?"jalali":"gregorian";if(a>=e)return dt(c("startDateAfterEnd")),void ct(!1);if(nt){const s=t=>new Promise(a=>setTimeout(a,t));let r=null,n=null,l=null,d=null,o=null;try{r=await m({itemId:at,startDate:a,endDate:e,calendar:i}),await s(50)}catch(t){At(t)||G.warn("PointMeanByDate failed:",t)}try{n=await x({itemId:at,startDate:a,endDate:e,calendar:i}),await s(50)}catch(t){At(t)||G.warn("PointMinByDate failed:",t)}try{l=await u({itemId:at,startDate:a,endDate:e,calendar:i}),await s(50)}catch(t){At(t)||G.warn("PointMaxByDate failed:",t)}try{d=await h({itemId:at,startDate:a,endDate:e,calendar:i}),await s(50)}catch(t){At(t)||G.warn("PointStdByDate failed:",t)}try{o=await f({itemId:at,startDate:a,endDate:e,calendar:i})}catch(t){At(t)||G.warn("PointCountByDate failed:",t)}const c=[],p=new Set;r?.dailyValues?.forEach(t=>p.add(t.date)),n?.dailyValues?.forEach(t=>p.add(t.date)),l?.dailyValues?.forEach(t=>p.add(t.date)),d?.dailyValues?.forEach(t=>p.add(t.date)),o?.dailyCounts?.forEach(t=>p.add(t.date)),Array.from(p).sort().forEach(t=>{const a=r?.dailyValues?.find(a=>a.date===t),e=n?.dailyValues?.find(a=>a.date===t),i=l?.dailyValues?.find(a=>a.date===t),s=d?.dailyValues?.find(a=>a.date===t),m=o?.dailyCounts?.find(a=>a.date===t);c.push({date:t,mean:a?.value??null,min:e?.value??null,max:i?.value??null,std:s?.value??null,count:m?.count??0})}),Ft(c);const g=r?.dailyValues?.map(t=>t.value)||[],y=n?.dailyValues?.map(t=>t.value)||[],j=l?.dailyValues?.map(t=>t.value)||[],v=d?.dailyValues?.map(t=>t.value)||[],b=o?.dailyCounts?.reduce((t,a)=>t+a.count,0)||0;Dt({mean:g.length>0?g.reduce((t,a)=>t+a,0)/g.length:null,min:y.length>0?Math.min(...y):null,max:j.length>0?Math.max(...j):null,std:v.length>0?v.reduce((t,a)=>t+a,0)/v.length:null,count:b})}else{const t=await Promise.allSettled([o({itemId:at,startDate:a,endDate:e,value:"1"}),o({itemId:at,startDate:a,endDate:e,value:"0"}),f({itemId:at,startDate:a,endDate:e,calendar:i})]),[s,r,n]=t;if(t.every(t=>"rejected"===t.status&&At(t.reason)))return G.log("All requests were cancelled, component unmounting"),void ct(!1);const l=t.filter(t=>"rejected"===t.status&&!At(t.reason));l.length>0&&G.warn("Some digital statistics requests failed, continuing with partial data",{realErrors:l});const d="fulfilled"===s.status?s.value:null,c="fulfilled"===r.status?r.value:null,m="fulfilled"===n.status?n.value:null,x=e-a,u=d?.success?d.totalDurationSeconds:0,h=c?.success?c.totalDurationSeconds:0,p=m?.dailyCounts?.map(t=>({date:t.date,count:t.count}))||[];Ft(p);const g=m?.dailyCounts?.reduce((t,a)=>t+a.count,0)||0;Dt({onDuration:u,offDuration:h,totalDuration:x,onPercentage:x>0?u/x*100:0,offPercentage:x>0?h/x*100:0,count:g})}dt(null),ct(!1)}catch(t){if(At(t))return G.log("Request was cancelled, ignoring error"),void ct(!1);G.error("Error fetching historical statistics:",t),dt(c("statistics.errorLoadingStatistics")),ct(!1)}}else dt(c("itemNotFound"))};t.useEffect(()=>{let t=!0;return(async()=>{t&&await Vt()})(),()=>{t=!1}},[at,nt]),t.useEffect(()=>{let t,a=!0;const e=async()=>{a&&await Wt()};return t=setTimeout(()=>{e()},300),()=>{a=!1,clearTimeout(t)}},[at,mt,nt,J]);const Pt=t=>{xt(t),"custom"!==t&&(ht(""),pt(""))},Mt=()=>{Vt(),Wt()},kt=t.useCallback(t=>{const a=Math.floor(t/3600),e=Math.floor(t%3600/60);return a>0?`${a} ${c("statistics.hours")} ${e} ${c("statistics.minutes")}`:`${e} ${c("statistics.minutes")}`},[c]),Rt=t.useMemo(()=>{if(!$t||!nt)return{};const t=$t,a="fa"===J,e=t.map(t=>t.date),i=t.map(t=>t.mean??0),s=t.map(t=>t.min??0),r=t.map(t=>t.max??0);return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{let a=`${t[0].axisValue}<br/>`;return t.forEach(t=>{const e="number"==typeof t.value?t.value.toFixed(2):t.value;a+=`${t.marker} ${t.seriesName}: ${e} ${Ct}<br/>`}),a}},legend:{data:[c("statistics.mean"),c("statistics.minimum"),c("statistics.maximum")],textStyle:{fontFamily:a?"Vazirmatn":"Inter"}},grid:{left:a?"15%":"10%",right:a?"10%":"15%",bottom:"15%",top:"15%",containLabel:!0},xAxis:{type:"category",data:e,axisLabel:{fontFamily:a?"Vazirmatn":"Inter",rotate:45}},yAxis:{type:"value",name:Ct,axisLabel:{fontFamily:a?"Vazirmatn":"Inter"},nameTextStyle:{fontFamily:a?"Vazirmatn":"Inter"}},series:[{name:c("statistics.mean"),type:"line",data:i,itemStyle:{color:K.palette.primary.main},smooth:!0},{name:c("statistics.minimum"),type:"line",data:s,itemStyle:{color:K.palette.success.main},smooth:!0},{name:c("statistics.maximum"),type:"line",data:r,itemStyle:{color:K.palette.error.main},smooth:!0}]}},[$t,nt,J,c,Ct,K]),Lt=t.useMemo(()=>{if(!$t||!nt)return{};const t=$t,a="fa"===J,e=t.map(t=>t.date),i=t.map(t=>t.count);return{tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:t=>{const a="number"==typeof t[0].value?t[0].value.toLocaleString():t[0].value;return`${t[0].axisValue}<br/>${t[0].marker} ${t[0].seriesName}: ${a}`}},grid:{left:a?"15%":"10%",right:a?"10%":"15%",bottom:"15%",top:"10%",containLabel:!0},xAxis:{type:"category",data:e,axisLabel:{fontFamily:a?"Vazirmatn":"Inter",rotate:45}},yAxis:{type:"value",name:c("statistics.count"),axisLabel:{fontFamily:a?"Vazirmatn":"Inter"},nameTextStyle:{fontFamily:a?"Vazirmatn":"Inter"}},series:[{name:c("statistics.count"),type:"bar",data:i,itemStyle:{color:K.palette.info.main}}]}},[$t,nt,J,c,K]),zt=t.useMemo(()=>{if(!bt||nt)return{};const t=bt,a="fa"===J;return{tooltip:{trigger:"item",formatter:t=>{const a="number"==typeof t.percent?t.percent.toFixed(2):t.percent;return`${t.name}: ${t.value} (${a}%)`}},legend:{orient:"vertical",left:a?"right":"left",textStyle:{fontFamily:a?"Vazirmatn":"Inter"}},series:[{name:c("statistics.stateDuration"),type:"pie",radius:"50%",data:[{value:Number(t.onPercentage.toFixed(2)),name:c("statistics.onState"),itemStyle:{color:K.palette.success.main}},{value:Number(t.offPercentage.toFixed(2)),name:c("statistics.offState"),itemStyle:{color:K.palette.grey[400]}}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontFamily:a?"Vazirmatn":"Inter"}}]}},[bt,nt,J,c,K]),Et=t.useMemo(()=>{if(!$t||nt)return{};const t=$t,a="fa"===J,e=t.map(t=>t.date),i=t.map(t=>t.count);return{tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:t=>{const a="number"==typeof t[0].value?t[0].value.toLocaleString():t[0].value;return`${t[0].axisValue}<br/>${t[0].marker} ${t[0].seriesName}: ${a}`}},grid:{left:a?"15%":"10%",right:a?"10%":"15%",bottom:"15%",top:"10%",containLabel:!0},xAxis:{type:"category",data:e,axisLabel:{fontFamily:a?"Vazirmatn":"Inter",rotate:45}},yAxis:{type:"value",name:c("statistics.count"),axisLabel:{fontFamily:a?"Vazirmatn":"Inter"},nameTextStyle:{fontFamily:a?"Vazirmatn":"Inter"}},series:[{name:c("statistics.count"),type:"bar",data:i,itemStyle:{color:K.palette.info.main}}]}},[$t,nt,J,c,K]),Tt=t.useMemo(()=>{if(!bt||nt)return{};const t=bt,a="fa"===J;return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{const a=t[0].value;return`${t[0].name}: ${kt(a)}`}},grid:{left:a?"15%":"10%",right:a?"10%":"15%",bottom:"15%",top:"10%",containLabel:!0},xAxis:{type:"value",axisLabel:{fontFamily:a?"Vazirmatn":"Inter",formatter:t=>`${Math.floor(t/3600)}h`}},yAxis:{type:"category",data:[c("statistics.onState"),c("statistics.offState")],axisLabel:{fontFamily:a?"Vazirmatn":"Inter"}},series:[{type:"bar",data:[{value:t.onDuration,itemStyle:{color:K.palette.success.main}},{value:t.offDuration,itemStyle:{color:K.palette.grey[400]}}]}]}},[bt,nt,J,c,K,kt]);return at?a.jsxs($,{p:3,"data-id-ref":"statistics-page-root-container",children:[a.jsxs($,{mb:3,"data-id-ref":"statistics-page-header",children:[a.jsxs(I,{variant:"h4",gutterBottom:!0,"data-id-ref":"statistics-page-title",children:[c("statistics.title")," - ",St]}),a.jsx(w,{label:c(nt?"statistics.analogPoint":"statistics.digitalPoint"),color:nt?"primary":"secondary",size:"small","data-id-ref":"statistics-page-point-type-chip"})]}),a.jsxs(S,{sx:{mb:3},"data-id-ref":"statistics-page-summary-card",children:[a.jsx(v,{title:c("statistics.summary"),icon:a.jsx(H,{}),action:a.jsx(C,{onClick:Mt,size:"small","data-id-ref":"statistics-page-summary-refresh-btn",children:a.jsx(N,{})}),dataIdRef:"statistics-page-summary-card-header"}),a.jsx(A,{"data-id-ref":"statistics-page-summary-content",children:jt?a.jsx($,{sx:{display:"flex",flexWrap:"wrap",gap:2},"data-id-ref":"statistics-page-summary-grid",children:nt?a.jsxs(a.Fragment,{children:[a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-mean",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.mean")}),a.jsx(I,{variant:"h6",children:null!==jt.mean?`${jt.mean?.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-min",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.minimum")}),a.jsx(I,{variant:"h6",color:"success.main",children:null!==jt.min?`${jt.min?.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-max",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.maximum")}),a.jsx(I,{variant:"h6",color:"error.main",children:null!==jt.max?`${jt.max?.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-std",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.standardDeviation")}),a.jsx(I,{variant:"h6",children:null!==jt.std?`${jt.std?.toFixed(2)} ${Ct}`:c("statistics.insufficientData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-count",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.count")}),a.jsx(I,{variant:"h6",children:jt.count})]})})]}):a.jsxs(a.Fragment,{children:[a.jsx($,{sx:{flex:"1 1 200px",minWidth:200},"data-id-ref":"statistics-page-summary-on-duration",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.onDuration")}),a.jsx(I,{variant:"h6",color:"success.main",children:kt(jt.onDuration)}),a.jsxs(I,{variant:"caption",color:"text.secondary",children:["(",jt.onPercentage.toFixed(1),"%)"]})]})}),a.jsx($,{sx:{flex:"1 1 200px",minWidth:200},"data-id-ref":"statistics-page-summary-off-duration",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.offDuration")}),a.jsx(I,{variant:"h6",children:kt(jt.offDuration)}),a.jsxs(I,{variant:"caption",color:"text.secondary",children:["(",jt.offPercentage.toFixed(1),"%)"]})]})}),a.jsx($,{sx:{flex:"1 1 200px",minWidth:200},"data-id-ref":"statistics-page-summary-count",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.count")}),a.jsx(I,{variant:"h6",children:jt.count})]})})]})}):a.jsx(I,{color:"text.secondary","data-id-ref":"statistics-page-summary-no-data",children:c("loading")})})]}),a.jsxs(S,{sx:{mb:3},"data-id-ref":"statistics-page-date-range-card",children:[a.jsx(v,{title:c("dateRange"),subtitle:wt,action:et?a.jsx(C,{onClick:()=>yt(!gt),size:"small","data-id-ref":"statistics-page-date-range-toggle-btn",children:gt?a.jsx(q,{}):a.jsx(O,{})}):void 0,dataIdRef:"statistics-page-date-range-card-header"}),a.jsx(V,{in:!gt,timeout:"auto",unmountOnExit:!0,children:a.jsx(A,{"data-id-ref":"statistics-page-date-range-content",children:a.jsxs($,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"flex-end"},gap:2},children:[a.jsxs(W,{variant:"outlined",size:"small",sx:{flexWrap:"wrap"},"data-id-ref":"statistics-page-date-range-preset-group",children:[a.jsx(P,{onClick:()=>Pt("last24Hours"),variant:"last24Hours"===mt?"contained":"outlined","data-id-ref":"statistics-page-preset-last24hours-btn",children:c("last24Hours")}),a.jsx(P,{onClick:()=>Pt("last7Days"),variant:"last7Days"===mt?"contained":"outlined","data-id-ref":"statistics-page-preset-last7days-btn",children:c("last7Days")}),a.jsx(P,{onClick:()=>Pt("last30Days"),variant:"last30Days"===mt?"contained":"outlined","data-id-ref":"statistics-page-preset-last30days-btn",children:c("last30Days")}),a.jsx(P,{onClick:()=>Pt("custom"),variant:"custom"===mt?"contained":"outlined","data-id-ref":"statistics-page-preset-custom-btn",children:c("customRange")})]}),"custom"===mt&&a.jsxs(a.Fragment,{children:[a.jsx(y,{id:"startDate",value:ut,onChange:ht,"data-id-ref":"statistics-start-date",className:"",dateLabel:c("startDate"),timeLabel:c("startTime")}),a.jsx(y,{id:"endDate",value:ft,onChange:pt,"data-id-ref":"statistics-end-date",className:"",dateLabel:c("endDate"),timeLabel:c("endTime")}),a.jsx(P,{variant:"contained",onClick:()=>{ut&&ft&&Wt()},disabled:!ut||!ft,sx:{ml:{md:"auto"},minWidth:{xs:"100%",md:"auto"}},"data-id-ref":"statistics-page-apply-custom-date-btn",children:c("apply")})]})]})})})]}),lt&&a.jsx(F,{severity:"error",sx:{mb:3},action:a.jsx(P,{color:"inherit",size:"small",onClick:Mt,children:c("retry")}),"data-id-ref":"statistics-page-error-alert",children:lt}),a.jsxs(S,{sx:{mb:3},"data-id-ref":"statistics-page-historical-card",children:[a.jsx(v,{title:c("statistics.historical"),subtitle:wt,icon:a.jsx(X,{}),dataIdRef:"statistics-page-historical-card-header"}),a.jsxs(A,{"data-id-ref":"statistics-page-historical-content",children:[$t&&$t.length>0?a.jsx(M,{component:k,variant:"outlined","data-id-ref":"statistics-page-daily-table-container",children:a.jsxs(R,{size:"small","data-id-ref":"statistics-page-daily-table",children:[a.jsx(L,{children:a.jsxs(z,{"data-id-ref":"statistics-page-daily-table-header-row",children:[a.jsx(E,{"data-id-ref":"statistics-page-daily-table-header-date",children:a.jsx("strong",{children:c("date")})}),nt?a.jsxs(a.Fragment,{children:[a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-mean",children:a.jsx("strong",{children:c("statistics.mean")})}),a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-min",children:a.jsx("strong",{children:c("statistics.minimum")})}),a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-max",children:a.jsx("strong",{children:c("statistics.maximum")})}),a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-std",children:a.jsx("strong",{children:c("statistics.standardDeviation")})}),a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-count",children:a.jsx("strong",{children:c("statistics.count")})})]}):a.jsx(E,{align:"right","data-id-ref":"statistics-page-daily-table-header-count",children:a.jsx("strong",{children:c("statistics.count")})})]})}),a.jsx(T,{children:$t.map((t,e)=>a.jsxs(z,{hover:!0,"data-id-ref":`statistics-page-daily-table-row-${e}`,children:[a.jsx(E,{"data-id-ref":`statistics-page-daily-table-date-${e}`,children:t.date}),nt?a.jsxs(a.Fragment,{children:[a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-mean-${e}`,children:null!=t.mean?`${t.mean.toFixed(2)} ${Ct}`:"-"}),a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-min-${e}`,children:null!=t.min?`${t.min.toFixed(2)} ${Ct}`:"-"}),a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-max-${e}`,children:null!=t.max?`${t.max.toFixed(2)} ${Ct}`:"-"}),a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-std-${e}`,children:null!=t.std?`${t.std.toFixed(2)} ${Ct}`:"-"}),a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-count-${e}`,children:t.count})]}):a.jsx(E,{align:"right","data-id-ref":`statistics-page-daily-table-count-${e}`,children:t.count})]},t.date))})]})}):a.jsx(I,{color:"text.secondary","data-id-ref":"statistics-page-historical-loading",children:c(ot?"loading":"noData")}),bt&&a.jsxs($,{sx:{mt:3,pt:3,borderTop:1,borderColor:"divider"},"data-id-ref":"statistics-page-summary-statistics",children:[a.jsx(I,{variant:"h6",gutterBottom:!0,"data-id-ref":"statistics-page-summary-title",children:c("statistics.overallSummary")}),a.jsx($,{sx:{display:"flex",flexWrap:"wrap",gap:2},"data-id-ref":"statistics-page-summary-grid",children:nt?a.jsxs(a.Fragment,{children:[a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-mean",children:a.jsxs($,{textAlign:"center",children:[a.jsx(_,{color:"primary"}),a.jsx(I,{variant:"caption",color:"text.secondary",display:"block",children:c("statistics.averageMean")}),a.jsx(I,{variant:"h6",children:null!=bt.mean?`${bt.mean.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-min",children:a.jsxs($,{textAlign:"center",children:[a.jsx(Q,{color:"success",sx:{transform:"rotate(180deg)"}}),a.jsx(I,{variant:"caption",color:"text.secondary",display:"block",children:c("statistics.overallMinimum")}),a.jsx(I,{variant:"h6",color:"success.main",children:null!=bt.min?`${bt.min.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-max",children:a.jsxs($,{textAlign:"center",children:[a.jsx(Q,{color:"error"}),a.jsx(I,{variant:"caption",color:"text.secondary",display:"block",children:c("statistics.overallMaximum")}),a.jsx(I,{variant:"h6",color:"error.main",children:null!=bt.max?`${bt.max.toFixed(2)} ${Ct}`:c("noData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-std",children:a.jsxs($,{textAlign:"center",children:[a.jsx(U,{color:"primary"}),a.jsx(I,{variant:"caption",color:"text.secondary",display:"block",children:c("statistics.averageStdDev")}),a.jsx(I,{variant:"h6",children:null!=bt.std?`${bt.std.toFixed(2)} ${Ct}`:c("statistics.insufficientData")})]})}),a.jsx($,{sx:{flex:"1 1 150px",minWidth:150},"data-id-ref":"statistics-page-summary-count",children:a.jsxs($,{textAlign:"center",children:[a.jsx(Y,{color:"primary"}),a.jsx(I,{variant:"caption",color:"text.secondary",display:"block",children:c("statistics.totalCount")}),a.jsx(I,{variant:"h6",children:bt.count})]})})]}):a.jsxs(a.Fragment,{children:[a.jsx($,{sx:{flex:"1 1 250px",minWidth:250},"data-id-ref":"statistics-page-summary-on-duration",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.onDuration")}),a.jsx(I,{variant:"h5",color:"success.main",children:kt(bt.onDuration)}),a.jsxs(I,{variant:"body2",color:"text.secondary",children:[bt.onPercentage.toFixed(1),"%"]})]})}),a.jsx($,{sx:{flex:"1 1 250px",minWidth:250},"data-id-ref":"statistics-page-summary-off-duration",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.offDuration")}),a.jsx(I,{variant:"h5",children:kt(bt.offDuration)}),a.jsxs(I,{variant:"body2",color:"text.secondary",children:[bt.offPercentage.toFixed(1),"%"]})]})}),a.jsx($,{sx:{flex:"1 1 250px",minWidth:250},"data-id-ref":"statistics-page-summary-count",children:a.jsxs($,{textAlign:"center",children:[a.jsx(I,{variant:"caption",color:"text.secondary",children:c("statistics.totalCount")}),a.jsx(I,{variant:"h5",children:bt.count})]})})]})})]})]})]}),bt&&a.jsxs($,{"data-id-ref":"statistics-page-charts-container",children:[a.jsx(I,{variant:"h5",gutterBottom:!0,"data-id-ref":"statistics-page-charts-title",children:c("statistics.visualizations")}),a.jsx(B,{sx:{mb:3}}),nt?a.jsxs($,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[a.jsx($,{sx:{flex:"1 1 100%",minWidth:"100%"},"data-id-ref":"statistics-page-analog-comparison-chart-container",children:a.jsxs(S,{children:[a.jsx(v,{title:c("statistics.comparisonChart"),dataIdRef:"statistics-page-analog-comparison-chart-header"}),a.jsx(A,{children:a.jsx(j,{option:Rt,loading:ot,height:"400px",onRetry:Mt,dataIdRef:"statistics-page-analog-comparison-chart"})})]})}),a.jsx($,{sx:{flex:"1 1 100%",minWidth:"100%"},"data-id-ref":"statistics-page-analog-count-chart-container",children:a.jsxs(S,{children:[a.jsx(v,{title:c("statistics.dailyCountTrend"),dataIdRef:"statistics-page-analog-count-chart-header"}),a.jsx(A,{children:a.jsx(j,{option:Lt,loading:ot,height:"300px",onRetry:Mt,dataIdRef:"statistics-page-analog-count-chart"})})]})})]}):a.jsxs($,{sx:{display:"flex",flexWrap:"wrap",gap:3},children:[a.jsx($,{sx:{flex:"1 1 400px",minWidth:400},"data-id-ref":"statistics-page-digital-distribution-chart-container",children:a.jsxs(S,{children:[a.jsx(v,{title:c("statistics.stateDistribution"),dataIdRef:"statistics-page-digital-distribution-chart-header"}),a.jsx(A,{children:a.jsx(j,{option:zt,loading:ot,height:"400px",onRetry:Mt,dataIdRef:"statistics-page-digital-distribution-chart"})})]})}),a.jsx($,{sx:{flex:"1 1 400px",minWidth:400},"data-id-ref":"statistics-page-digital-duration-chart-container",children:a.jsxs(S,{children:[a.jsx(v,{title:c("statistics.durationChart"),dataIdRef:"statistics-page-digital-duration-chart-header"}),a.jsx(A,{children:a.jsx(j,{option:Tt,loading:ot,height:"400px",onRetry:Mt,dataIdRef:"statistics-page-digital-duration-chart"})})]})}),a.jsx($,{sx:{flex:"1 1 100%",minWidth:"100%"},"data-id-ref":"statistics-page-digital-count-chart-container",children:a.jsxs(S,{children:[a.jsx(v,{title:c("statistics.dailyCountTrend"),dataIdRef:"statistics-page-digital-count-chart-header"}),a.jsx(A,{children:a.jsx(j,{option:Et,loading:ot,height:"300px",onRetry:Mt,dataIdRef:"statistics-page-digital-count-chart"})})]})})]})]})]}):a.jsx($,{p:3,"data-id-ref":"statistics-page-no-item-container",children:a.jsx(F,{severity:"error","data-id-ref":"statistics-page-no-item-alert",children:c("itemNotFound")})})};export{J as default};
