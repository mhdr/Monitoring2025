const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddEditModbusControllerDialog-CBgHfXog.js","assets/vendor-TAwwu7tv.js","assets/date-utils-hKKKzaQW.js","assets/layout-C1_h6sDC.js","assets/i18n-BrX_VL2O.js","assets/mui-core-im59jMHH.js","assets/mui-icons-v3eeVnKX.js","assets/react-router-B0bL9ISA.js","assets/css/layout-BR9HfHKF.css","assets/DeleteModbusControllerDialog-C94btuYu.js","assets/ModbusMappingsDialog-DRFwbz5a.js","assets/SyncfusionGridWrapper-je9qfgPl.js","assets/index-uPr0P1lU.js","assets/syncfusion-Czakt5fS.js","assets/css/syncfusion-Db7U--rQ.css","assets/css/index-Do90pmhC.css","assets/css/SyncfusionGridWrapper-BHykEdu7.css","assets/api-D5q9v5qU.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./i18n-BrX_VL2O.js";import{bI as s,bQ as l}from"./vendor-TAwwu7tv.js";import{a as o,c as t,E as r}from"./layout-C1_h6sDC.js";import{SyncfusionGridWrapper as a}from"./SyncfusionGridWrapper-je9qfgPl.js";import{x as i,B as n,h as d,I as c,C as u,q as m,_ as h,v as f,a as x,r as b,w as p,t as j,W as g,c as C,j as S}from"./mui-core-im59jMHH.js";import{S as w,E as y,G as k,a8 as _,ak as T,al as z}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./react-router-B0bL9ISA.js";import"./index-uPr0P1lU.js";import"./syncfusion-Czakt5fS.js";const W=t(),D=s.lazy(()=>e(()=>import("./AddEditModbusControllerDialog-CBgHfXog.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),E=s.lazy(()=>e(()=>import("./DeleteModbusControllerDialog-C94btuYu.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]))),v=s.lazy(()=>e(()=>import("./ModbusMappingsDialog-DRFwbz5a.js"),__vite__mapDeps([10,4,1,2,3,5,6,7,8,11,12,13,14,15,16,17]))),A=()=>{const{t:e}=o(),[t,A]=s.useState([]),[F,M]=s.useState(!1),[I,P]=s.useState(null),[R,L]=s.useState(null),[$,O]=s.useState(""),G=s.useRef(null),[V,Q]=s.useState(!1),[q,B]=s.useState(!1),[H,J]=s.useState(null),[K,N]=s.useState(!1),[U,X]=s.useState(!1),[Y,Z]=s.useState(null),ee=s.useCallback(async()=>{M(!0),P(null);try{W.log("Fetching Modbus controllers");const s=await r();s?.data?(A(s.data),W.log("Controllers fetched successfully",{count:s.data.length})):P(e("modbusControllers.errors.fetchFailed"))}catch(s){W.error("Failed to fetch controllers",{error:s}),P(e("modbusControllers.errors.fetchFailed"))}finally{M(!1)}},[e]);s.useEffect(()=>{ee()},[ee]);const se=s.useCallback(()=>{J(null),N(!1),Q(!0)},[]),le=s.useCallback(e=>{J(e),N(!0),Q(!0)},[]),oe=s.useCallback(e=>{J(e),B(!0)},[]),te=s.useCallback(e=>{Z(e),X(!0)},[]),re=e=>{Q(!1),B(!1),J(null),N(!1),e&&(ee(),R&&setTimeout(()=>L(null),5e3))},ae=s.useMemo(()=>{if(!$)return t;const e=$.toLowerCase();return t.filter(s=>s.name?.toLowerCase().includes(e)||s.ipAddress?.toLowerCase().includes(e))},[t,$]),ie=s.useCallback(s=>{const o=s,t=o.isDisabled||!1;return l.jsx(i,{"data-id-ref":`modbus-status-${o.id}`,label:e(t?"modbusControllers.status.disabled":"modbusControllers.status.enabled"),color:t?"error":"success",size:"small"})},[e]),ne=s.useCallback(s=>{const o=s;return o?l.jsxs(n,{"data-id-ref":`modbus-actions-${o.id}`,sx:{display:"flex",gap:.5,py:.5},children:[l.jsx(d,{title:e("modbusControllers.mappings.title"),children:l.jsx(c,{"data-id-ref":`modbus-mappings-btn-${o.id}`,size:"small",color:"info",onClick:()=>te(o),children:l.jsx(w,{fontSize:"small"})})}),l.jsx(d,{title:e("modbusControllers.editController"),children:l.jsx(c,{"data-id-ref":`modbus-edit-btn-${o.id}`,size:"small",color:"primary",onClick:()=>le(o),children:l.jsx(y,{fontSize:"small"})})}),l.jsx(d,{title:e("modbusControllers.deleteController"),children:l.jsx(c,{"data-id-ref":`modbus-delete-btn-${o.id}`,size:"small",color:"error",onClick:()=>oe(o),children:l.jsx(k,{fontSize:"small"})})})]}):null},[e,te,le,oe]),de=s.useMemo(()=>[{headerText:e("modbusControllers.fields.name"),field:"name",width:150,minWidth:150,allowFiltering:!0,allowSorting:!0},{headerText:e("modbusControllers.fields.ipAddress"),field:"ipAddress",width:130,minWidth:130,allowFiltering:!0,allowSorting:!0},{headerText:e("modbusControllers.fields.port"),field:"port",width:80,minWidth:80,allowFiltering:!0,allowSorting:!0,type:"number"},{headerText:e("modbusControllers.fields.connectionType"),field:"connectionType",width:120,minWidth:120,allowSorting:!0},{headerText:e("modbusControllers.fields.modbusType"),field:"modbusType",width:100,minWidth:100,allowSorting:!0},{headerText:e("modbusControllers.fields.endianness"),field:"endianness",width:140,minWidth:140,allowSorting:!0},{headerText:e("modbusControllers.fields.status"),field:"isDisabled",width:100,minWidth:100,allowSorting:!0,template:ie},{headerText:e("common.actions"),field:"id",width:150,minWidth:150,allowSorting:!1,allowFiltering:!1,template:ne}],[e,ie,ne]);return l.jsxs(u,{maxWidth:!1,"data-id-ref":"modbus-controllers-page-container",sx:{height:"100%",width:"100%",py:3,px:{xs:2,sm:3}},children:[l.jsxs(m,{"data-id-ref":"modbus-controllers-page-card",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[l.jsx(h,{"data-id-ref":"modbus-controllers-page-card-header",title:l.jsx(x,{variant:"h4",component:"h1","data-id-ref":"modbus-controllers-page-title",children:e("modbusControllers.title")}),action:l.jsx(f,{"data-id-ref":"modbus-add-controller-btn",variant:"contained",color:"primary",startIcon:l.jsx(_,{}),onClick:se,sx:{minWidth:140},children:e("modbusControllers.addController")})}),l.jsxs(b,{"data-id-ref":"modbus-controllers-page-card-body",sx:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",gap:2},children:[l.jsx(p,{"data-id-ref":"modbus-filters",direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:l.jsx(j,{"data-id-ref":"modbus-search-input",placeholder:e("modbusControllers.searchPlaceholder"),value:$,onChange:e=>{O(e.target.value)},size:"small",sx:{flex:1,minWidth:200},InputProps:{startAdornment:l.jsx(g,{position:"start",children:l.jsx(z,{})}),endAdornment:$&&l.jsx(g,{position:"end",children:l.jsx(c,{"data-id-ref":"modbus-clear-search-btn",size:"small",onClick:()=>{O("")},edge:"end",children:l.jsx(T,{})})})}})}),I&&l.jsx(C,{"data-id-ref":"modbus-error-alert",severity:"error",onClose:()=>P(null),sx:{mb:2},children:I}),R&&l.jsx(C,{"data-id-ref":"modbus-success-alert",severity:"success",onClose:()=>L(null),sx:{mb:2},children:R}),F&&l.jsx(n,{"data-id-ref":"modbus-loading",sx:{display:"flex",justifyContent:"center",py:4},children:l.jsx(S,{})}),!F&&l.jsx(n,{"data-id-ref":"modbus-grid-container",sx:{flex:1,minHeight:400},children:l.jsx(a,{idRef:"modbus-controllers",data:ae,columns:de,onGridReady:e=>{G.current=e},height:"100%",allowPaging:!0,pageSettings:{pageSize:25,pageSizes:[10,25,50,100]},allowSorting:!0,allowFiltering:!0,allowResizing:!0})})]})]}),l.jsx(s.Suspense,{fallback:null,children:V&&l.jsx(D,{open:V,editMode:K,controller:H,onClose:re,onSuccess:e=>L(e)})}),l.jsx(s.Suspense,{fallback:null,children:q&&l.jsx(E,{open:q,controller:H,onClose:re,onSuccess:e=>L(e)})}),l.jsx(s.Suspense,{fallback:null,children:U&&l.jsx(v,{open:U,controller:Y,onClose:()=>{X(!1),Z(null)}})})]})};export{A as default};
