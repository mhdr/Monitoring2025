import{bI as e,bQ as o}from"./vendor-TAwwu7tv.js";import{a as r,c as l,ab as s}from"./layout-C1_h6sDC.js";import{z as t,E as n,B as d,a,F as i,c,Q as m,O as u,v as b,j as f}from"./mui-core-im59jMHH.js";import{W as j}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./react-router-B0bL9ISA.js";const x=l(),g=({open:l,controller:g,onClose:h,onSuccess:C})=>{const{t:p}=r(),[y,v]=e.useState(!1),[I,w]=e.useState(null),F=()=>{w(null),h(!1)};return o.jsxs(t,{open:l,onClose:F,maxWidth:"sm",fullWidth:!0,"data-id-ref":"delete-modbus-controller-dialog",children:[o.jsx(n,{"data-id-ref":"delete-modbus-controller-dialog-title",children:o.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsx(j,{color:"warning"}),o.jsx(a,{variant:"h6",children:p("modbusControllers.dialogs.deleteTitle")})]})}),o.jsxs(i,{"data-id-ref":"delete-modbus-controller-dialog-content",children:[I&&o.jsx(c,{"data-id-ref":"delete-modbus-controller-error",severity:"error",onClose:()=>w(null),sx:{mb:2},children:I}),o.jsx(m,{"data-id-ref":"delete-modbus-controller-confirmation-text",children:p("modbusControllers.dialogs.deleteMessage",{name:g?.name||""})}),o.jsx(c,{severity:"warning",sx:{mt:2},"data-id-ref":"delete-modbus-controller-warning",children:p("modbusControllers.dialogs.deleteWarning")})]}),o.jsxs(u,{"data-id-ref":"delete-modbus-controller-dialog-actions",children:[o.jsx(b,{"data-id-ref":"cancel-delete-modbus-controller-btn",onClick:F,disabled:y,children:p("common.buttons.cancel")}),o.jsx(b,{"data-id-ref":"confirm-delete-modbus-controller-btn",onClick:async()=>{if(g&&g.id){v(!0),w(null);try{x.log("Deleting controller",{controllerId:g.id,name:g.name});const e=await s({id:g.id});e.isSuccessful?(x.log("Controller deleted successfully",{controllerId:g.id}),C(p("modbusControllers.success.deleted")),h(!0)):w(e.errorMessage||p("modbusControllers.errors.deleteFailed"))}catch(e){x.error("Failed to delete controller",{error:e}),w(p("modbusControllers.errors.deleteFailed"))}finally{v(!1)}}else x.error("Cannot delete controller: controller or controller ID is null")},variant:"contained",color:"error",disabled:y,startIcon:y&&o.jsx(f,{size:20}),children:p(y?"common.loading":"common.buttons.delete")})]})]})};export{g as default};
