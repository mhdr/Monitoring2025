import{bI as e,bQ as t}from"./vendor-TAwwu7tv.js";import{b as i,c as s,d as n,u as a}from"./index-uPr0P1lU.js";import{a as r,I as o,J as d,K as c,L as l,M as g,N as h}from"./layout-C1_h6sDC.js";import{u as f,B as x,a as m,v as p,x as j,a7 as u,aa as y,q as b,r as v,C as T,c as C,G as I,V as k,S}from"./mui-core-im59jMHH.js";import{am as w,ad as D,ac as $,S as z,an as E,k as W,N as P,a9 as q,ao as B}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./syncfusion-Czakt5fS.js";import"./react-router-B0bL9ISA.js";function N(){const t=f(),a=i(e=>e.currentTheme),r=i(e=>e.setTheme);return{theme:t,currentThemePreset:a,changeTheme:e.useCallback(async e=>{r(e)},[r]),getThemeConfig:n,getThemesByCategory:s}}function A({theme:e,isActive:i,onSelect:s}){const{language:n}=r(),a="fa"===n?e.nameFa:e.nameEn;return t.jsx(b,{"data-id-ref":`theme-option-${e.id}`,onClick:s,sx:{cursor:"pointer",border:i?2:1,borderColor:i?"primary.main":"divider",bgcolor:i?"action.selected":"background.paper",transition:"all 0.2s","&:hover":{borderColor:"primary.main",transform:"translateY(-2px)",boxShadow:3}},children:t.jsxs(v,{sx:{p:2,"&:last-child":{pb:2}},children:[t.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(m,{variant:"h5",component:"span","data-id-ref":`theme-emoji-${e.id}`,children:e.emoji}),t.jsx(m,{variant:"body2",fontWeight:i?600:400,"data-id-ref":`theme-name-${e.id}`,children:a})]}),t.jsxs(x,{sx:{display:"flex",gap:.5,mt:1},children:[t.jsx(x,{sx:{width:20,height:20,borderRadius:1,bgcolor:e.primary,border:1,borderColor:"divider"},title:`Primary: ${e.primary}`}),t.jsx(x,{sx:{width:20,height:20,borderRadius:1,bgcolor:e.secondary,border:1,borderColor:"divider"},title:`Secondary: ${e.secondary}`})]})]})})}function F({category:i,themes:s,currentThemeId:n,onThemeSelect:r}){const{t:o}=a(),[d,c]=e.useState("light"===i),l={light:o("settings.theme.categories.light"),dark:o("settings.theme.categories.dark"),colorful:o("settings.theme.categories.colorful")};return t.jsxs(x,{"data-id-ref":`theme-category-${i}`,sx:{mb:2},children:[t.jsx(p,{fullWidth:!0,"data-id-ref":`theme-category-header-${i}`,onClick:()=>c(!d),sx:{justifyContent:"space-between",textTransform:"none",py:1.5,px:2,bgcolor:"action.hover","&:hover":{bgcolor:"action.selected"}},endIcon:d?t.jsx(D,{}):t.jsx($,{}),children:t.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(m,{variant:"h6",component:"span",children:l[i]}),t.jsx(j,{label:s.length,size:"small",color:"primary","data-id-ref":`theme-count-${i}`})]})}),t.jsx(u,{in:d,children:t.jsx(x,{sx:{p:2},children:t.jsx(y,{container:!0,spacing:2,"data-id-ref":`theme-grid-${i}`,children:s.map(e=>t.jsx(y,{size:{xs:6,sm:4,md:3},children:t.jsx(A,{theme:e,isActive:n===e.id,onSelect:()=>r(e.id)})},e.id))})})})]})}function G(){const{t:e}=a(),{currentThemePreset:i,changeTheme:s,getThemesByCategory:n}=N(),r=n("light"),o=n("dark"),d=n("colorful"),c=e=>{s(e)};return t.jsxs(x,{"data-id-ref":"theme-switcher-section",children:[t.jsxs(x,{"data-id-ref":"theme-switcher-title",sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[t.jsx(w,{color:"primary","data-id-ref":"theme-switcher-icon"}),t.jsx(m,{variant:"h5",component:"h2",children:e("settings.theme.title")})]}),t.jsx(F,{category:"light",themes:r,currentThemeId:i,onThemeSelect:c}),t.jsx(F,{category:"dark",themes:o,currentThemeId:i,onThemeSelect:c}),t.jsx(F,{category:"colorful",themes:d,currentThemeId:i,onThemeSelect:c})]})}const H=()=>{const{t:e}=a();return t.jsx(x,{"data-id-ref":"settings-page-root",sx:{height:"100%",width:"100%",py:"24px",px:0,mx:0},children:t.jsxs(T,{maxWidth:!1,"data-id-ref":"settings-page-container",children:[t.jsxs(x,{"data-id-ref":"settings-page-header",sx:{mb:4},children:[t.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(z,{color:"primary","data-id-ref":"settings-page-title-icon"}),t.jsx(m,{variant:"h4",component:"h1","data-id-ref":"settings-page-title",children:e("settings.pageTitle")})]}),t.jsx(m,{variant:"body1",color:"text.secondary","data-id-ref":"settings-page-description",children:e("settings.pageDescription")})]}),t.jsxs(y,{container:!0,spacing:3,"data-id-ref":"settings-page-content-row",children:[t.jsx(y,{size:12,"data-id-ref":"settings-page-language-col",children:t.jsx(b,{elevation:2,"data-id-ref":"settings-page-language-card",children:t.jsxs(v,{"data-id-ref":"settings-page-language-card-body",children:[t.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[t.jsx(E,{color:"primary","data-id-ref":"settings-page-language-icon"}),t.jsx(m,{variant:"h5",component:"h2","data-id-ref":"settings-page-language-card-title",children:e("settings.language.sectionTitle")})]}),t.jsx(m,{variant:"body2",color:"text.secondary",sx:{mb:3},"data-id-ref":"settings-page-language-description",children:e("settings.language.sectionDescription")}),t.jsx(x,{"data-id-ref":"settings-page-language-switcher-section",children:t.jsx(L,{})})]})})}),t.jsx(y,{size:12,"data-id-ref":"settings-page-theme-col",children:t.jsx(b,{elevation:2,"data-id-ref":"settings-page-theme-card",children:t.jsx(v,{"data-id-ref":"settings-page-theme-card-body",children:t.jsx(G,{})})})}),t.jsx(y,{size:12,"data-id-ref":"settings-page-notification-col",children:t.jsx(b,{elevation:2,"data-id-ref":"settings-page-notification-card",children:t.jsx(v,{"data-id-ref":"settings-page-notification-card-body",children:t.jsx(R,{})})})})]})]})})},L=()=>{const{t:e}=a(),{language:i,changeLanguage:s}=r();return t.jsxs(y,{container:!0,spacing:2,"data-id-ref":"settings-language-options-grid",children:[t.jsx(y,{size:{xs:12,sm:6},children:t.jsx(p,{fullWidth:!0,variant:"fa"===i?"contained":"outlined",onClick:()=>s("fa"),"aria-label":"ÙØ§Ø±Ø³ÛŒ","data-id-ref":"settings-language-option-fa",sx:{p:2,justifyContent:"flex-start",textTransform:"none",height:"auto"},startIcon:t.jsx(m,{variant:"h4",component:"span","data-id-ref":"settings-language-flag-fa",children:"ðŸ‡®ðŸ‡·"}),endIcon:"fa"===i?t.jsx(W,{"data-id-ref":"settings-language-check-fa"}):null,children:t.jsxs(x,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1},"data-id-ref":"settings-language-info-fa",children:[t.jsx(m,{variant:"h6",component:"span","data-id-ref":"settings-language-name-fa",children:"ÙØ§Ø±Ø³ÛŒ"}),t.jsx(m,{variant:"body2",color:"text.secondary","data-id-ref":"settings-language-desc-fa",children:e("settings.language.persianDescription")})]})})}),t.jsx(y,{size:{xs:12,sm:6},children:t.jsx(p,{fullWidth:!0,variant:"en"===i?"contained":"outlined",onClick:()=>s("en"),"aria-label":"English","data-id-ref":"settings-language-option-en",sx:{p:2,justifyContent:"flex-start",textTransform:"none",height:"auto"},startIcon:t.jsx(m,{variant:"h4",component:"span","data-id-ref":"settings-language-flag-en",children:"ðŸ‡¬ðŸ‡§"}),endIcon:"en"===i?t.jsx(W,{"data-id-ref":"settings-language-check-en"}):null,children:t.jsxs(x,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",flex:1},"data-id-ref":"settings-language-info-en",children:[t.jsx(m,{variant:"h6",component:"span","data-id-ref":"settings-language-name-en",children:"English"}),t.jsx(m,{variant:"body2",color:"text.secondary","data-id-ref":"settings-language-desc-en",children:e("settings.language.englishDescription")})]})})})]})},R=()=>{const{t:i}=a(),{preferences:s,setEnabled:n}=o(),[r,f]=e.useState("default"),[j,u]=e.useState({open:!1,message:"",severity:"info"});e.useEffect(()=>{d()&&f(c())},[]);const y=()=>{u({...j,open:!1})},b=d(),v=b&&"granted"===r;return t.jsxs(t.Fragment,{children:[t.jsxs(x,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[s.enabled&&"granted"===r?t.jsx(P,{color:"primary","data-id-ref":"settings-page-notification-icon-active"}):t.jsx(q,{color:"disabled","data-id-ref":"settings-page-notification-icon-off"}),t.jsx(m,{variant:"h5",component:"h2","data-id-ref":"settings-page-notification-card-title",children:i("settings.notifications.sectionTitle")})]}),t.jsx(m,{variant:"body2",color:"text.secondary",sx:{mb:3},"data-id-ref":"settings-page-notification-description",children:i("settings.notifications.sectionDescription")}),!b&&t.jsx(C,{severity:"warning",sx:{mb:2},"data-id-ref":"settings-notification-unsupported",children:i("settings.notifications.unsupported")}),b&&"denied"===r&&t.jsx(C,{severity:"error",sx:{mb:2},"data-id-ref":"settings-notification-denied",children:i("notifications.permission.denied")}),t.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsx(I,{control:t.jsx(k,{checked:s.enabled,onChange:e=>{const t=e.target.checked;try{n(t),u({open:!0,message:i(t?"notifications.permission.enabled":"notifications.permission.disabled"),severity:"success"})}catch(s){u({open:!0,message:i("common.error"),severity:"error"})}},disabled:!v,"data-id-ref":"settings-notification-toggle"}),label:t.jsxs(x,{children:[t.jsx(m,{variant:"body1","data-id-ref":"settings-notification-toggle-label",children:s.enabled?i("settings.notifications.enabled"):i("settings.notifications.disabled")}),t.jsx(m,{variant:"body2",color:"text.secondary","data-id-ref":"settings-notification-toggle-hint",children:i("settings.notifications.enableHint")})]}),"data-id-ref":"settings-notification-toggle-control"}),t.jsxs(x,{sx:{display:"flex",flexDirection:"column",gap:1},children:[t.jsxs(m,{variant:"body2",color:"text.secondary","data-id-ref":"settings-notification-permission-status",children:[i("settings.notifications.permissionStatus"),": ",i("granted"===r?"settings.notifications.permissionGranted":"denied"===r?"settings.notifications.permissionDenied":"settings.notifications.permissionDefault")]}),"granted"!==r&&b&&t.jsx(p,{variant:"outlined",onClick:async()=>{try{const e=await l();f(e),"granted"===e?(u({open:!0,message:i("notifications.permission.enabled"),severity:"success"}),n(!0)):"denied"===e&&u({open:!0,message:i("notifications.permission.denied"),severity:"error"})}catch(e){u({open:!0,message:i("common.error"),severity:"error"})}},startIcon:t.jsx(B,{}),"data-id-ref":"settings-notification-request-permission",sx:{alignSelf:"flex-start"},children:i("settings.notifications.requestPermission")})]}),"granted"===r&&t.jsx(p,{variant:"outlined",onClick:()=>{if("granted"!==r)return void u({open:!0,message:i("notifications.permission.denied"),severity:"error"});const e=g(1,2,i);h(e),u({open:!0,message:i("settings.notifications.testSent"),severity:"info"})},startIcon:t.jsx(P,{}),disabled:!s.enabled,"data-id-ref":"settings-notification-test",sx:{alignSelf:"flex-start"},children:i("settings.notifications.testNotification")})]}),t.jsx(S,{open:j.open,autoHideDuration:3e3,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"center"},"data-id-ref":"settings-notification-snackbar",children:t.jsx(C,{onClose:y,severity:j.severity,sx:{width:"100%"},"data-id-ref":"settings-notification-snackbar-alert",children:j.message})})]})};export{H as default};
