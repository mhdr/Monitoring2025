import{bI as e,bQ as s}from"./vendor-TAwwu7tv.js";import{a as r,c as a}from"./layout-C1_h6sDC.js";import{d as t}from"./UsersPage-BulyG3ME.js";import{z as i,E as l,B as n,a as d,F as o,c as u,Q as m,O as c,v as f,j as g}from"./mui-core-im59jMHH.js";import{W as j}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./react-router-B0bL9ISA.js";import"./SyncfusionGridWrapper-je9qfgPl.js";import"./index-uPr0P1lU.js";import"./syncfusion-Czakt5fS.js";const x=a(),p=({open:a,user:p,onClose:h})=>{const{t:y,language:N}=r(),[b,F]=e.useState(!1),[v,C]=e.useState(null),I=()=>{h(!1)};return s.jsxs(i,{open:a,onClose:I,maxWidth:"sm",fullWidth:!0,"data-id-ref":"delete-user-dialog",children:[s.jsx(l,{"data-id-ref":"delete-user-dialog-title",children:s.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[s.jsx(j,{color:"warning"}),s.jsx(d,{variant:"h6",children:y("userManagement.dialogs.deleteUserTitle")})]})}),s.jsxs(o,{"data-id-ref":"delete-user-dialog-content",children:[v&&s.jsx(u,{"data-id-ref":"delete-user-error",severity:"error",onClose:()=>C(null),sx:{mb:2},children:v}),s.jsx(m,{"data-id-ref":"delete-user-confirmation-text",children:y("userManagement.dialogs.deleteUserMessage",{userName:p?"fa"===N&&p.firstNameFa&&p.lastNameFa?`${p.firstNameFa} ${p.lastNameFa}`:`${p.firstName||""} ${p.lastName||""}`.trim()||p.userName||"":""})}),s.jsx(u,{severity:"warning",sx:{mt:2},"data-id-ref":"delete-user-warning",children:y("userManagement.dialogs.deleteUserWarning")})]}),s.jsxs(c,{"data-id-ref":"delete-user-dialog-actions",children:[s.jsx(f,{"data-id-ref":"cancel-delete-user-btn",onClick:I,disabled:b,children:y("common.buttons.cancel")}),s.jsx(f,{"data-id-ref":"confirm-delete-user-btn",onClick:async()=>{if(p&&p.id){F(!0),C(null);try{x.log("Deleting user",{userId:p.id,userName:p.userName});const e=await t(p.id);e.success?(x.log("User deleted successfully",{userId:p.id}),h(!0)):C(e.message||y("userManagement.errors.deleteFailed"))}catch(e){x.error("Failed to delete user",{error:e}),C(y("userManagement.errors.deleteFailed"))}finally{F(!1)}}else x.error("Cannot delete user: user or user ID is null")},variant:"contained",color:"error",disabled:b,startIcon:b&&s.jsx(g,{size:20}),children:y(b?"common.loading":"common.buttons.delete")})]})]})};export{p as default};
