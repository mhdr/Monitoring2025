import{bI as s,bQ as e}from"./vendor-TAwwu7tv.js";import{a as r,c as a}from"./layout-C1_h6sDC.js";import{r as t}from"./UsersPage-BulyG3ME.js";import{z as o,E as i,B as n,a as d,F as l,c as m,Q as c,O as u,v as f,j as p}from"./mui-core-im59jMHH.js";import{ai as g}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./react-router-B0bL9ISA.js";import"./SyncfusionGridWrapper-je9qfgPl.js";import"./index-uPr0P1lU.js";import"./syncfusion-Czakt5fS.js";const j=a(),w=({open:a,user:w,onClose:x})=>{const{t:h,language:N}=r(),[y,b]=s.useState(!1),[F,P]=s.useState(null),M=()=>{x(!1)};return e.jsxs(o,{open:a,onClose:M,maxWidth:"sm",fullWidth:!0,"data-id-ref":"reset-password-dialog",children:[e.jsx(i,{"data-id-ref":"reset-password-dialog-title",children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(g,{color:"warning"}),e.jsx(d,{variant:"h6",children:h("userManagement.dialogs.resetPasswordTitle")})]})}),e.jsxs(l,{"data-id-ref":"reset-password-dialog-content",children:[F&&e.jsx(m,{"data-id-ref":"reset-password-error",severity:"error",onClose:()=>P(null),sx:{mb:2},children:F}),e.jsx(c,{"data-id-ref":"reset-password-confirmation-text",children:h("userManagement.dialogs.resetPasswordMessage",{userName:w?"fa"===N&&w.firstNameFa&&w.lastNameFa?`${w.firstNameFa} ${w.lastNameFa}`:`${w.firstName||""} ${w.lastName||""}`.trim()||w.userName||"":""})}),e.jsx(m,{severity:"info",sx:{mt:2},"data-id-ref":"reset-password-warning",children:h("userManagement.dialogs.resetPasswordWarning")})]}),e.jsxs(u,{"data-id-ref":"reset-password-dialog-actions",children:[e.jsx(f,{"data-id-ref":"cancel-reset-password-btn",onClick:M,disabled:y,children:h("common.buttons.cancel")}),e.jsx(f,{"data-id-ref":"confirm-reset-password-btn",onClick:async()=>{if(w&&w.userName){b(!0),P(null);try{j.log("Resetting user password",{userName:w.userName});const s=await t(w.userName);if(s.isSuccessful)j.log("Password reset successfully",{userName:w.userName}),x(!0);else{const e=s.message||(s.errors&&s.errors.length>0?s.errors.join(", "):null)||h("userManagement.errors.resetPasswordFailed");P(e)}}catch(s){j.error("Failed to reset password",{error:s}),P(h("userManagement.errors.resetPasswordFailed"))}finally{b(!1)}}else j.error("Cannot reset password: user or userName is null")},variant:"contained",color:"warning",disabled:y,startIcon:y&&e.jsx(p,{size:20}),children:h(y?"common.loading":"userManagement.actions.resetPassword")})]})]})};export{w as default};
