import{bI as e,bQ as r}from"./vendor-TAwwu7tv.js";import{a as l,c as o,af as s}from"./layout-C1_h6sDC.js";import{z as t,E as a,B as n,a as d,F as i,c,Q as h,O as m,v as p,j as f}from"./mui-core-im59jMHH.js";import{W as u}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./i18n-BrX_VL2O.js";import"./react-router-B0bL9ISA.js";const j=o(),x=({open:o,controller:x,onClose:g,onSuccess:C})=>{const{t:b}=l(),[y,v]=e.useState(!1),[I,w]=e.useState(null),F=()=>{w(null),g(!1)};return r.jsxs(t,{open:o,onClose:F,maxWidth:"sm",fullWidth:!0,"data-id-ref":"delete-sharp7-controller-dialog",children:[r.jsx(a,{"data-id-ref":"delete-sharp7-controller-dialog-title",children:r.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(u,{color:"warning"}),r.jsx(d,{variant:"h6",children:b("sharp7Controllers.dialogs.deleteTitle")})]})}),r.jsxs(i,{"data-id-ref":"delete-sharp7-controller-dialog-content",children:[I&&r.jsx(c,{"data-id-ref":"delete-sharp7-controller-error",severity:"error",onClose:()=>w(null),sx:{mb:2},children:I}),r.jsx(h,{"data-id-ref":"delete-sharp7-controller-confirmation-text",children:b("sharp7Controllers.dialogs.deleteMessage",{name:x?.name||""})}),r.jsx(c,{severity:"warning",sx:{mt:2},"data-id-ref":"delete-sharp7-controller-warning",children:b("sharp7Controllers.dialogs.deleteWarning")})]}),r.jsxs(m,{"data-id-ref":"delete-sharp7-controller-dialog-actions",children:[r.jsx(p,{"data-id-ref":"cancel-delete-sharp7-controller-btn",onClick:F,disabled:y,children:b("common.buttons.cancel")}),r.jsx(p,{"data-id-ref":"confirm-delete-sharp7-controller-btn",onClick:async()=>{if(x&&x.id){v(!0),w(null);try{j.log("Deleting controller",{controllerId:x.id,name:x.name});const e=await s({id:x.id});e.isSuccessful?(j.log("Controller deleted successfully",{controllerId:x.id}),C(b("sharp7Controllers.success.deleted")),g(!0)):w(e.errorMessage||b("sharp7Controllers.errors.deleteFailed"))}catch(e){j.error("Failed to delete controller",{error:e}),w(b("sharp7Controllers.errors.deleteFailed"))}finally{v(!1)}}else j.error("Cannot delete controller: controller or controller ID is null")},variant:"contained",color:"error",disabled:y,startIcon:y&&r.jsx(f,{size:20}),children:b(y?"common.loading":"common.buttons.delete")})]})]})};export{x as default};
