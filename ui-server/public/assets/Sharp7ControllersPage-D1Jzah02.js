const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddEditSharp7ControllerDialog-Cg0X-Vyj.js","assets/vendor-TAwwu7tv.js","assets/date-utils-hKKKzaQW.js","assets/layout-C1_h6sDC.js","assets/i18n-BrX_VL2O.js","assets/mui-core-im59jMHH.js","assets/mui-icons-v3eeVnKX.js","assets/react-router-B0bL9ISA.js","assets/css/layout-BR9HfHKF.css","assets/DeleteSharp7ControllerDialog-CVwqmcMl.js","assets/Sharp7MappingsDialog-B5Z1ZGGu.js","assets/SyncfusionGridWrapper-je9qfgPl.js","assets/index-uPr0P1lU.js","assets/syncfusion-Czakt5fS.js","assets/css/syncfusion-Db7U--rQ.css","assets/css/index-Do90pmhC.css","assets/css/SyncfusionGridWrapper-BHykEdu7.css","assets/api-D5q9v5qU.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./i18n-BrX_VL2O.js";import{bI as l,bQ as s}from"./vendor-TAwwu7tv.js";import{a as r,c as a,F as t}from"./layout-C1_h6sDC.js";import{SyncfusionGridWrapper as i}from"./SyncfusionGridWrapper-je9qfgPl.js";import{x as o,B as n,h as d,I as c,C as h,q as p,_ as u,v as m,a as f,r as x,w as j,t as g,W as C,c as S,j as w}from"./mui-core-im59jMHH.js";import{S as b,E as y,G as k,a8 as z,ak as _,al as D}from"./mui-icons-v3eeVnKX.js";import"./date-utils-hKKKzaQW.js";import"./react-router-B0bL9ISA.js";import"./index-uPr0P1lU.js";import"./syncfusion-Czakt5fS.js";const F=a(),T=l.lazy(()=>e(()=>import("./AddEditSharp7ControllerDialog-Cg0X-Vyj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),W=l.lazy(()=>e(()=>import("./DeleteSharp7ControllerDialog-CVwqmcMl.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]))),A=l.lazy(()=>e(()=>import("./Sharp7MappingsDialog-B5Z1ZGGu.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,11,12,13,14,15,16,17]))),v=()=>{const{t:e}=r(),[a,v]=l.useState([]),[E,R]=l.useState(!1),[I,L]=l.useState(null),[P,$]=l.useState(null),[M,G]=l.useState(""),O=l.useRef(null),[V,q]=l.useState(!1),[B,H]=l.useState(!1),[Q,J]=l.useState(null),[K,N]=l.useState(!1),[U,X]=l.useState(!1),[Y,Z]=l.useState(null),ee=l.useCallback(async()=>{R(!0),L(null);try{F.log("Fetching Sharp7 controllers");const l=await t();l?.data?(v(l.data),F.log("Controllers fetched successfully",{count:l.data.length})):L(e("sharp7Controllers.errors.fetchFailed"))}catch(l){F.error("Failed to fetch controllers",{error:l}),L(e("sharp7Controllers.errors.fetchFailed"))}finally{R(!1)}},[e]);l.useEffect(()=>{ee()},[ee]);const le=l.useCallback(()=>{J(null),N(!1),q(!0)},[]),se=l.useCallback(e=>{J(e),N(!0),q(!0)},[]),re=l.useCallback(e=>{J(e),H(!0)},[]),ae=l.useCallback(e=>{Z(e),X(!0)},[]),te=e=>{q(!1),H(!1),J(null),N(!1),e&&(ee(),P&&setTimeout(()=>$(null),5e3))},ie=l.useMemo(()=>{if(!M)return a;const e=M.toLowerCase();return a.filter(l=>l.name?.toLowerCase().includes(e)||l.ipAddress?.toLowerCase().includes(e)||l.username?.toLowerCase().includes(e))},[a,M]),oe=l.useCallback(l=>{const r=l,a=r.isDisabled||!1;return s.jsx(o,{"data-id-ref":`sharp7-status-${r.id}`,label:e(a?"sharp7Controllers.status.disabled":"sharp7Controllers.status.enabled"),color:a?"error":"success",size:"small"})},[e]),ne=l.useCallback(l=>{const r=l;return r?s.jsxs(n,{"data-id-ref":`sharp7-actions-${r.id}`,sx:{display:"flex",gap:.5,py:.5},children:[s.jsx(d,{title:e("sharp7Controllers.mappings.title"),children:s.jsx(c,{"data-id-ref":`sharp7-mappings-btn-${r.id}`,size:"small",color:"info",onClick:()=>ae(r),children:s.jsx(b,{fontSize:"small"})})}),s.jsx(d,{title:e("sharp7Controllers.editController"),children:s.jsx(c,{"data-id-ref":`sharp7-edit-btn-${r.id}`,size:"small",color:"primary",onClick:()=>se(r),children:s.jsx(y,{fontSize:"small"})})}),s.jsx(d,{title:e("sharp7Controllers.deleteController"),children:s.jsx(c,{"data-id-ref":`sharp7-delete-btn-${r.id}`,size:"small",color:"error",onClick:()=>re(r),children:s.jsx(k,{fontSize:"small"})})})]}):null},[e,ae,se,re]),de=l.useMemo(()=>[{headerText:e("sharp7Controllers.fields.name"),field:"name",width:150,minWidth:150,allowFiltering:!0,allowSorting:!0},{headerText:e("sharp7Controllers.fields.ipAddress"),field:"ipAddress",width:130,minWidth:130,allowFiltering:!0,allowSorting:!0},{headerText:e("sharp7Controllers.fields.dbAddress"),field:"dbAddress",width:100,minWidth:100,allowFiltering:!0,allowSorting:!0,type:"number"},{headerText:e("sharp7Controllers.fields.dbStartData"),field:"dbStartData",width:110,minWidth:110,allowFiltering:!0,allowSorting:!0,type:"number"},{headerText:e("sharp7Controllers.fields.dbSizeData"),field:"dbSizeData",width:110,minWidth:110,allowFiltering:!0,allowSorting:!0,type:"number"},{headerText:e("sharp7Controllers.fields.username"),field:"username",width:100,minWidth:100,allowFiltering:!0,allowSorting:!0},{headerText:e("sharp7Controllers.fields.status"),field:"isDisabled",width:100,minWidth:100,allowSorting:!0,template:oe},{headerText:e("common.actions"),field:"id",width:150,minWidth:150,allowSorting:!1,allowFiltering:!1,template:ne}],[e,oe,ne]);return s.jsxs(h,{maxWidth:!1,"data-id-ref":"sharp7-controllers-page-container",sx:{height:"100%",width:"100%",py:3,px:{xs:2,sm:3}},children:[s.jsxs(p,{"data-id-ref":"sharp7-controllers-page-card",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsx(u,{"data-id-ref":"sharp7-controllers-page-card-header",title:s.jsx(f,{variant:"h4",component:"h1","data-id-ref":"sharp7-controllers-page-title",children:e("sharp7Controllers.title")}),action:s.jsx(m,{"data-id-ref":"sharp7-add-controller-btn",variant:"contained",color:"primary",startIcon:s.jsx(z,{}),onClick:le,sx:{minWidth:140},children:e("sharp7Controllers.addController")})}),s.jsxs(x,{"data-id-ref":"sharp7-controllers-page-card-body",sx:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",gap:2},children:[s.jsx(j,{"data-id-ref":"sharp7-filters",direction:{xs:"column",sm:"row"},spacing:2,sx:{mb:2},children:s.jsx(g,{"data-id-ref":"sharp7-search-input",placeholder:e("sharp7Controllers.searchPlaceholder"),value:M,onChange:e=>{G(e.target.value)},size:"small",sx:{flex:1,minWidth:200},InputProps:{startAdornment:s.jsx(C,{position:"start",children:s.jsx(D,{})}),endAdornment:M&&s.jsx(C,{position:"end",children:s.jsx(c,{"data-id-ref":"sharp7-clear-search-btn",size:"small",onClick:()=>{G("")},edge:"end",children:s.jsx(_,{})})})}})}),I&&s.jsx(S,{"data-id-ref":"sharp7-error-alert",severity:"error",onClose:()=>L(null),sx:{mb:2},children:I}),P&&s.jsx(S,{"data-id-ref":"sharp7-success-alert",severity:"success",onClose:()=>$(null),sx:{mb:2},children:P}),E&&s.jsx(n,{"data-id-ref":"sharp7-loading",sx:{display:"flex",justifyContent:"center",py:4},children:s.jsx(w,{})}),!E&&s.jsx(n,{"data-id-ref":"sharp7-grid-container",sx:{flex:1,minHeight:400},children:s.jsx(i,{idRef:"sharp7-controllers",data:ie,columns:de,onGridReady:e=>{O.current=e},height:"100%",allowPaging:!0,pageSettings:{pageSize:25,pageSizes:[10,25,50,100]},allowSorting:!0,allowFiltering:!0,allowResizing:!0})})]})]}),s.jsx(l.Suspense,{fallback:null,children:V&&s.jsx(T,{open:V,editMode:K,controller:Q,onClose:te,onSuccess:e=>$(e)})}),s.jsx(l.Suspense,{fallback:null,children:B&&s.jsx(W,{open:B,controller:Q,onClose:te,onSuccess:e=>$(e)})}),s.jsx(l.Suspense,{fallback:null,children:U&&s.jsx(A,{open:U,controller:Y,onClose:()=>{X(!1),Z(null)}})})]})};export{v as default};
