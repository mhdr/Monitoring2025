import{bI as t,bQ as e}from"./vendor-TAwwu7tv.js";import{E as a}from"./echarts-DOIPydnp.js";import{a as o,c as r}from"./layout-C1_h6sDC.js";import{u as i}from"./index-uPr0P1lU.js";import{t as n,f as l}from"./dateFormatting-Oyh3Sj-d.js";import{u as s}from"./mui-core-im59jMHH.js";const m=r(),y=({history:r,item:y,itemName:p,height:f="100%",width:u="100%"})=>{const{language:c}=o(),{t:d}=i(),x=s(),h="fa"===c;m.log("ValueHistoryChart render",{itemId:y.id,itemName:p,historyLength:r.length});const g=t.useCallback(t=>{if(null==t)return d("noValue");if(1===y.itemType||2===y.itemType)return"true"===t||"1"===t?h&&y.onTextFa?y.onTextFa:y.onText||d("on"):h&&y.offTextFa?y.offTextFa:y.offText||d("off");const e=parseFloat(t);if(!isNaN(e)){const t=h&&y.unitFa?y.unitFa:y.unit||"",a=t?`${e} ${t}`:e.toString();return h?n(a):a}return h?n(t):t},[d,h,y]),F=t.useMemo(()=>{if(!r||0===r.length)return{};const t=r.map(t=>l(t.time,c,"long")),e=r.map(t=>t.value),a=h&&y.unitFa?y.unitFa:y.unit,o=a?` (${a})`:"",i=h?"IRANSansX, sans-serif":"inherit";return{title:{show:!1},tooltip:{trigger:"axis",formatter:t=>{const e=t;if(e&&e[0]){const t=g(String(e[0].value));return`${e[0].seriesName}: ${t}<br/>${e[0].name}`}return""},textStyle:{fontFamily:i,fontSize:12}},grid:{left:"3%",right:"3%",bottom:"3%",top:"3%",containLabel:!0},xAxis:{type:"category",data:t,axisLabel:{show:!1,fontFamily:i},axisLine:{lineStyle:{color:x.palette.divider}}},yAxis:{type:"value",name:`${d("value")}${o}`,nameTextStyle:{color:x.palette.text.secondary,fontFamily:i},axisLabel:{color:x.palette.text.secondary,formatter:t=>g(String(t)),fontFamily:i},axisLine:{lineStyle:{color:x.palette.divider}},splitLine:{lineStyle:{color:x.palette.divider,type:"dashed"}}},series:[{name:d("value"),type:"line",data:e,smooth:!0,lineStyle:{color:x.palette.primary.main,width:2},itemStyle:{color:x.palette.primary.main},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:x.palette.primary.main+"40"},{offset:1,color:x.palette.primary.main+"10"}]}}}],textStyle:{fontFamily:i}}},[r,c,h,y,g,x,d]);return e.jsx(a,{option:F,style:{height:f,width:u},opts:{renderer:"svg",locale:h?"FA":"EN"},notMerge:!0,lazyUpdate:!1,"data-id-ref":"value-history-chart"})};export{y as V};
